import{S as J,r as yt,a as bt,d as vt,n as wt,s as $,b as V,c as kt,e as D,f as O,y as xt,p as Z,g as Et,h as ot,i as Y,j as zt,k as rt,l as Bt,m as Mt,o as jt,q as qt,t as St,u as _,v as tt,w as et,x as Tt,z as At,A as It,G as M,B as $t,C as Ct}from"./quiz-Did3f5KT.js";function at(e){return typeof e=="string"?new J([document.querySelectorAll(e)],[document.documentElement]):new J([bt(e)],yt)}const I=e=>()=>e;function G(e,{sourceEvent:o,subject:r,target:a,identifier:f,active:g,x:h,y:E,dx:s,dy:m,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:f,enumerable:!0,configurable:!0},active:{value:g,enumerable:!0,configurable:!0},x:{value:h,enumerable:!0,configurable:!0},y:{value:E,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:d}})}G.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Lt(e){return!e.ctrlKey&&!e.button}function Rt(){return this.parentNode}function Dt(e,o){return o??{x:e.x,y:e.y}}function Ot(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wt(){var e=Lt,o=Rt,r=Dt,a=Ot,f={},g=vt("start","drag","end"),h=0,E,s,m,d,q=0;function n(t){t.on("mousedown.drag",c).filter(a).on("touchstart.drag",ft).on("touchmove.drag",gt,wt).on("touchend.drag touchcancel.drag",pt).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(t,i){if(!(d||!e.call(this,t,i))){var u=Q(this,o.call(this,t,i),t,i,"mouse");u&&($(t.view).on("mousemove.drag",z,V).on("mouseup.drag",dt,V),kt(t.view),D(t),m=!1,E=t.clientX,s=t.clientY,u("start",t))}}function z(t){if(O(t),!m){var i=t.clientX-E,u=t.clientY-s;m=i*i+u*u>q}f.mouse("drag",t)}function dt(t){$(t.view).on("mousemove.drag mouseup.drag",null),xt(t.view,m),O(t),f.mouse("end",t)}function ft(t,i){if(e.call(this,t,i)){var u=t.changedTouches,l=o.call(this,t,i),p=u.length,b,B;for(b=0;b<p;++b)(B=Q(this,l,t,i,u[b].identifier,u[b]))&&(D(t),B("start",t,u[b]))}}function gt(t){var i=t.changedTouches,u=i.length,l,p;for(l=0;l<u;++l)(p=f[i[l].identifier])&&(O(t),p("drag",t,i[l]))}function pt(t){var i=t.changedTouches,u=i.length,l,p;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),l=0;l<u;++l)(p=f[i[l].identifier])&&(D(t),p("end",t,i[l]))}function Q(t,i,u,l,p,b){var B=g.copy(),y=Z(b||u,i),K,N,A;if((A=r.call(t,new G("beforestart",{sourceEvent:u,target:n,identifier:p,active:h,x:y[0],y:y[1],dx:0,dy:0,dispatch:B}),l))!=null)return K=A.x-y[0]||0,N=A.y-y[1]||0,function ht(L,P,mt){var U=y,R;switch(L){case"start":f[p]=ht,R=h++;break;case"end":delete f[p],--h;case"drag":y=Z(mt||P,i),R=h;break}B.call(L,t,new G(L,{sourceEvent:P,subject:A,target:n,identifier:p,active:R,x:y[0]+K,y:y[1]+N,dx:y[0]-U[0],dy:y[1]-U[1],dispatch:B}),l)}}return n.filter=function(t){return arguments.length?(e=typeof t=="function"?t:I(!!t),n):e},n.container=function(t){return arguments.length?(o=typeof t=="function"?t:I(t),n):o},n.subject=function(t){return arguments.length?(r=typeof t=="function"?t:I(t),n):r},n.touchable=function(t){return arguments.length?(a=typeof t=="function"?t:I(!!t),n):a},n.on=function(){var t=g.on.apply(g,arguments);return t===g?n:t},n.clickDistance=function(t){return arguments.length?(q=(t=+t)*t,n):Math.sqrt(q)},n}function Ft(e){return function(o,r){var a=zt(o*o+r*r),f=e(a),g=Y(f),h=rt(f);return[Et(o*g,a*h),ot(a&&r*g/a)]}}function it(e,o){return[rt(o)*Y(e),Y(o)]}it.invert=Ft(ot);function Yt(){return Bt(it).scale(249.5).clipAngle(90+Mt)}let w,k,T,W,v,j,S=[],C=!1,H=!1,x,X,st;window.addEventListener("load",()=>{const e=document.getElementById("btn-world-start");e&&(e.onclick=r=>{r.preventDefault(),ct("world")});const o=document.getElementById("btn-quiz-back");o&&(o.onclick=r=>{r.preventDefault(),jt()}),Gt()});function ct(e){const o=document.getElementById("view-landing"),r=document.getElementById("view-quiz");o&&o.classList.add("hidden"),r&&r.classList.remove("hidden"),qt(e)}async function Gt(){const e=document.getElementById("continent-map");if(!e)return;w=e.clientWidth,k=e.clientHeight,$(e).selectAll("*").remove(),T=$(e).append("svg").attr("class","world-svg").attr("viewBox",`0 0 ${w} ${k}`).attr("preserveAspectRatio","xMidYMid meet").style("touch-action","none").style("-webkit-tap-highlight-color","transparent"),W=T.append("g");const o=Math.min(w,k),a=window.innerWidth<768?.99:.9,f=o/2*a;v=Yt().scale(f).center([0,0]).translate([w/2,k/2]).clipAngle(90),j=St().projection(v);let g=0,h=0;const E=Wt().on("start",s=>{C=!0,H=!1,g=s.x,h=s.y,x&&x.stop()}).on("drag",s=>{const m=s.x-g,d=s.y-h;Math.sqrt(m*m+d*d)>5&&(H=!0);const n=75/v.scale(),c=v.rotate(),z=[c[0]+s.dx*n,c[1]-s.dy*n];v.rotate(z),ut()}).on("end",()=>{C=!1,nt()});T.call(E);try{const s=await _(tt.topo,"World Atlas"),m=await _(tt.countries,"World Countries"),d=new Map;m.forEach(n=>{n.ccn3&&d.set(et(n.ccn3),n)}),d.has("383")||d.set("383",{name:{common:"Kosovo"},ccn3:"383",region:"Europe",subregion:"Southeast Europe"}),S=Tt(s,s.objects.countries).features,S.forEach(n=>{if(n.id===-99||n.id==="-99"){const c=At(n);c[1]>5&&c[1]<15&&c[0]>40&&c[0]<55?n.id="706":c[1]>40&&c[1]<45&&c[0]>19&&c[0]<23&&(n.id="383")}}),S=S.map(n=>{var z;const c=d.get(et(n.id));return c&&(n.properties.continent=It(c),n.properties.name=(z=c.name)==null?void 0:z.common),n}),X=W.append("path").datum({type:"Sphere"}).attr("class","ocean").attr("d",j).attr("fill",M.ocean).attr("stroke",M.stroke).attr("stroke-width",2),st=W.selectAll(".country").data(S).enter().append("path").attr("class","country globe-country").attr("d",j).attr("data-continent",n=>n.properties.continent).style("fill",n=>M.continents[n.properties.continent]||M.default).style("stroke",M.stroke).style("stroke-width","0.5px").style("stroke-opacity",1).on("mouseover",Ht).on("mouseout",Xt).on("click",Qt),nt()}catch(s){console.error("Globe Init Error:",s),e.innerHTML=`<div class='map-error'>Failed to load globe: ${s.message}</div>`}}function Ht(e,o){if(C)return;const r=o.properties.continent;if(!r)return;at(`.country[data-continent='${r}']`).classed("hovered-continent",!0).style("filter","brightness(0.7)").style("stroke","#000000").style("stroke-width","1px");const a=document.getElementById("continent-tooltip");a&&(a.innerText=$t(r),a.style.opacity="1",a.style.left=e.pageX+10+"px",a.style.top=e.pageY-20+"px")}function Xt(e,o){const r=o.properties.continent;r&&at(`.country[data-continent='${r}']`).classed("hovered-continent",!1).style("filter",null).style("stroke",M.stroke).style("stroke-width",null);const a=document.getElementById("continent-tooltip");a&&(a.style.opacity="0")}function Qt(e,o){if(H)return;const r=o.properties.continent;r&&(x&&x.stop(),ct(r))}let F=!1;function ut(){F||(F=!0,requestAnimationFrame(()=>{lt(),F=!1}))}function lt(){!j||!X||(X.attr("d",j),st.attr("d",j))}function nt(){x&&x.stop(),x=Ct(e=>{if(C)return;const o=v.rotate();v.rotate([o[0]+.2,o[1]]),lt()})}window.addEventListener("resize",()=>{if(!T)return;const e=document.getElementById("continent-map");if(!e)return;w=e.clientWidth,k=e.clientHeight;const r=Math.min(w,k)/2*.9;T.attr("viewBox",`0 0 ${w} ${k}`),v.translate([w/2,k/2]).scale(r),ut()});
