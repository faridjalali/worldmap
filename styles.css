:root {
  --bg-deep: #050505;
  --map-stroke: rgba(255, 255, 255, 0.15);
  --neon-blue: #00f3ff;
  --neon-pink: #ff0055;
  --neon-green: #00ff9d;
  --neon-amber: #ffaa00;
  --glass: rgba(15, 15, 15, 0.85);
  --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  --card: rgba(20, 20, 20, 0.95);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background-color: var(--bg-deep);
  color: white;
  font-family: var(--font-main);
  overflow: hidden;
  height: 100vh;
  width: 100vw;
  user-select: none;
  touch-action: none;
}

#map-stage { width: 100%; height: 100%; cursor: crosshair; }

.state {
  stroke: var(--map-stroke);
  stroke-width: 0.5px;
  transition: fill 0.3s, opacity 0.3s;
  vector-effect: non-scaling-stroke;
  fill: rgba(120, 180, 220, 0.4);
}

.state:hover { opacity: 0.8; stroke: rgba(255,255,255,0.6); stroke-width: 1px; }
.state.active-focused { opacity: 1; stroke: #fff; stroke-width: 2px; }

/* Animation */
.state.correct-flash { animation: flashSuccess 0.5s forwards; }
.state.wrong-flash { animation: flashError 0.5s forwards; }
@keyframes flashSuccess { 0% { fill: var(--neon-green); opacity: 1; } 100% { fill: inherit; opacity: 1; } }
@keyframes flashError { 0% { fill: var(--neon-pink); opacity: 1; } 100% { fill: inherit; opacity: 1; } }

.city-node {
  fill: var(--neon-blue);
  stroke: rgba(0, 243, 255, 0.2);
  stroke-width: 5px;
  cursor: pointer;
  pointer-events: none;
  transition: 0.3s;
}
.city-node:hover { fill: #fff; stroke: var(--neon-blue); stroke-width: 8px; }
.city-node.wrong-choice { fill: var(--neon-pink); stroke: var(--neon-pink); pointer-events: none; opacity: 0.6; }
.city-node.correct-choice { fill: var(--neon-green); stroke: var(--neon-green); }

#ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }

#top-hud {
  position: absolute; top: 40px; left: 50%; transform: translateX(-50%);
  background: var(--glass); border: 1px solid rgba(255,255,255,0.1);
  padding: 10px 30px; border-radius: 50px; display: flex; gap: 40px;
  backdrop-filter: blur(15px); z-index: 10; pointer-events: auto;
}

.hud-group { display: flex; flex-direction: column; align-items: center; min-width: 70px; }
.hud-item { font-size: 0.7rem; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 1.5px; }
.hud-val { color: var(--neon-blue); font-weight: 800; font-size: 1.2rem; }

.toggle-container { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
.toggle-switch { width: 40px; height: 20px; background: #333; border-radius: 20px; position: relative; transition: 0.3s; border: 1px solid #444; }
.toggle-knob { width: 16px; height: 16px; background: white; border-radius: 50%; position: absolute; top: 1px; left: 2px; transition: 0.3s; }
.active .toggle-switch { background: var(--neon-blue); }
.active .toggle-knob { left: 21px; }

#prompt-container { position: absolute; top: 20%; width: 100%; text-align: center; text-shadow: 0 5px 25px black; }
#find-label { font-size: 1.2rem; text-transform: uppercase; color: #888; letter-spacing: 4px; margin: 0; }
#main-prompt { font-size: 2rem; font-weight: 900; margin: 5px 0 0; }
#sub-prompt { font-size: 1.1rem; color: var(--neon-blue); margin-top: 8px; }

#fact-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.95);
  z-index: 100; display: flex; justify-content: center; align-items: center;
  opacity: 0; pointer-events: none; transition: opacity 0.3s;
}
#fact-overlay.show { opacity: 1; pointer-events: auto; }
.fact-card {
  background: #111; border: 2px solid var(--neon-blue);
  border-radius: 20px; padding: 45px; max-width: 500px; width: 90%; text-align: center;
}
.fact-status { font-weight: 800; letter-spacing: 4px; margin-bottom: 12px; font-size: 1.1rem; text-transform: uppercase; }
.status-correct { color: var(--neon-green); }
.status-wrong { color: var(--neon-pink); }
.fact-city { font-size: 2.2rem; margin: 0 0 15px; color: white; font-weight: 900; }
.fact-body { color: #ddd; line-height: 1.7; margin-bottom: 35px; font-size: 1.1rem; }
.next-btn { background: var(--neon-blue); color: #000; border: none; padding: 16px 45px; font-weight: 800; border-radius: 40px; cursor: pointer; text-transform: uppercase; }

#city-tooltip {
  position: absolute; background: black; border: 1px solid var(--neon-blue);
  color: white; padding: 4px 8px; font-size: 12px; pointer-events: none; opacity: 0; z-index: 50;
}

/* Landing page */
.landing { overflow: auto; }
.landing-wrap {
  min-height: 100vh;
  display: grid;
  place-items: center;
  padding: 60px 20px;
  background: radial-gradient(1000px 500px at 50% -10%, rgba(0,243,255,0.15), transparent 60%),
              linear-gradient(180deg, #050505, #0c0c0c);
}
.landing-title { font-size: 3rem; margin: 0; }
.landing-subtitle { color: #bbb; margin-top: 8px; margin-bottom: 30px; }
.continent-grid {
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  width: min(800px, 92vw);
}
.continent-card {
  background: var(--card);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 18px 20px;
  text-align: center;
  text-decoration: none;
  color: white;
  border-radius: 16px;
  transition: transform 0.2s, border-color 0.2s;
}
.continent-card:hover {
  transform: translateY(-2px);
  border-color: var(--neon-blue);
}

.map-wrap {
  width: min(1000px, 94vw);
  margin: 20px auto 0;
  display: grid;
  gap: 14px;
  justify-items: center;
}

.world-map {
  width: 100%;
  height: auto;
  filter: drop-shadow(0 18px 60px rgba(0, 243, 255, 0.08));
}

.continent-link { cursor: pointer; }
.continent {
  fill: rgba(120, 180, 220, 0.32);
  stroke: rgba(255, 255, 255, 0.2);
  stroke-width: 2;
  transition: transform 0.2s ease, fill 0.2s ease, stroke 0.2s ease, filter 0.2s ease;
  transform-origin: center;
}
.continent:hover {
  fill: rgba(0, 243, 255, 0.4);
  stroke: rgba(0, 243, 255, 0.9);
  filter: drop-shadow(0 0 12px rgba(0,243,255,0.6));
}

.c-na { fill: rgba(255, 150, 150, 0.35); }
.c-sa { fill: rgba(255, 210, 120, 0.35); }
.c-eu { fill: rgba(170, 200, 255, 0.35); }
.c-af { fill: rgba(180, 255, 170, 0.35); }
.c-as { fill: rgba(200, 180, 255, 0.35); }
.c-oc { fill: rgba(255, 180, 230, 0.35); }
.c-world { fill: rgba(0, 243, 255, 0.25); }

.world-text {
  font-size: 16px;
  fill: white;
  font-weight: 700;
  letter-spacing: 1px;
  pointer-events: none;
}

.map-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 10px 16px;
  justify-content: center;
  color: #bbb;
  font-size: 0.9rem;
}
.legend-item { padding: 4px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.08); }
.legend-item.na { color: #ffb0b0; }
.legend-item.sa { color: #ffd28a; }
.legend-item.eu { color: #b5d6ff; }
.legend-item.af { color: #b6ffc0; }
.legend-item.as { color: #d2b8ff; }
.legend-item.oc { color: #ffc1e6; }

:root {
  --c-na: rgba(255, 120, 120, 0.55);
  --c-sa: rgba(255, 195, 120, 0.55);
  --c-eu: rgba(140, 200, 255, 0.55);
  --c-af: rgba(120, 255, 190, 0.55);
  --c-as: rgba(190, 160, 255, 0.55);
  --c-oc: rgba(255, 150, 220, 0.55);
}

.landing {
  overflow: hidden;
  background: radial-gradient(1200px 600px at 50% -10%, rgba(0,243,255,0.15), transparent 60%),
              linear-gradient(180deg, #050505, #0c0c0c);
}

.landing-shell {
  min-height: 100vh;
  display: grid;
  gap: 18px;
  place-items: center;
  padding: 40px 16px 60px;
}

.landing-header {
  text-align: center;
}

.landing-title {
  font-size: clamp(2.3rem, 4vw, 3.5rem);
  margin: 0;
}

.landing-subtitle {
  color: #bbb;
  margin-top: 8px;
}

.landing-status {
  margin-top: 8px;
  font-size: 0.95rem;
  color: rgba(255,255,255,0.65);
}

.map-card {
  width: min(1100px, 95vw);
  background: rgba(10, 10, 10, 0.75);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 24px;
  padding: 18px;
  backdrop-filter: blur(16px);
  position: relative;
  box-shadow: 0 20px 80px rgba(0, 0, 0, 0.6);
}

.map-stage {
  width: 100%;
  height: min(70vh, 560px);
  position: relative;
}

.world-svg {
  width: 100%;
  height: 100%;
}

.country {
  fill: rgba(120, 180, 220, 0.22);
  stroke: rgba(255, 255, 255, 0.15);
  stroke-width: 0.5;
  transition: fill 0.2s, opacity 0.2s, stroke 0.2s;
}

.country.dim {
  opacity: 0.15;
}

.country.highlight {
  opacity: 1;
  stroke: rgba(255,255,255,0.8);
  stroke-width: 1.2;
}

.country.highlight[data-continent="north-america"] { fill: var(--c-na); }
.country.highlight[data-continent="south-america"] { fill: var(--c-sa); }
.country.highlight[data-continent="europe"] { fill: var(--c-eu); }
.country.highlight[data-continent="africa"] { fill: var(--c-af); }
.country.highlight[data-continent="asia"] { fill: var(--c-as); }
.country.highlight[data-continent="oceania"] { fill: var(--c-oc); }

.map-tooltip {
  position: absolute;
  background: #0b0b0b;
  border: 1px solid rgba(255,255,255,0.2);
  color: white;
  padding: 6px 10px;
  font-size: 13px;
  border-radius: 10px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.map-actions {
  display: flex;
  justify-content: center;
  margin-top: 12px;
}

.world-btn {
  display: inline-block;
  background: var(--neon-blue);
  color: #000;
  text-decoration: none;
  font-weight: 800;
  padding: 12px 24px;
  border-radius: 999px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.map-error {
  color: #ff8b8b;
  text-align: center;
  padding: 30px;
  font-size: 1rem;
}

