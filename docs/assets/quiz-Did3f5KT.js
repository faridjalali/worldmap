(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();class pt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=e[r],a=n+o,u=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);u&&(e[i++]=u),n=a}return e[i]=n,this._n=i+1,this}valueOf(){const n=this._partials;let e=this._n,i,r,o,a=0;if(e>0){for(a=n[--e];e>0&&(i=a,r=n[--e],a=i+r,o=r-(a-i),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}function*Ur(t){for(const n of t)yield*n}function Qi(t){return Array.from(Ur(t))}var Wr={value:()=>{}};function Qe(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Tn(e)}function Tn(t){this._=t}function Zr(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Tn.prototype=Qe.prototype={constructor:Tn,on:function(t,n){var e=this._,i=Zr(t+"",e),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=Kr(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(r=(t=i[o]).type)e[r]=ci(e[r],t.name,n);else if(n==null)for(r in e)e[r]=ci(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Tn(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function Kr(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function ci(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=Wr,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}var _e="http://www.w3.org/1999/xhtml";const li={svg:"http://www.w3.org/2000/svg",xhtml:_e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oe(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),li.hasOwnProperty(n)?{space:li[n],local:t}:t}function Qr(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===_e&&n.documentElement.namespaceURI===_e?n.createElement(t):n.createElementNS(e,t)}}function Jr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ji(t){var n=oe(t);return(n.local?Jr:Qr)(n)}function jr(){}function Je(t){return t==null?jr:function(){return this.querySelector(t)}}function to(t){typeof t!="function"&&(t=Je(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,u=i[r]=new Array(a),l,c,s=0;s<a;++s)(l=o[s])&&(c=t.call(l,l.__data__,s,o))&&("__data__"in l&&(c.__data__=l.__data__),u[s]=c);return new it(i,this._parents)}function no(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function eo(){return[]}function ji(t){return t==null?eo:function(){return this.querySelectorAll(t)}}function io(t){return function(){return no(t.apply(this,arguments))}}function ro(t){typeof t=="function"?t=io(t):t=ji(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var a=n[o],u=a.length,l,c=0;c<u;++c)(l=a[c])&&(i.push(t.call(l,l.__data__,c,a)),r.push(l));return new it(i,r)}function tr(t){return function(){return this.matches(t)}}function nr(t){return function(n){return n.matches(t)}}var oo=Array.prototype.find;function ao(t){return function(){return oo.call(this.children,t)}}function so(){return this.firstElementChild}function uo(t){return this.select(t==null?so:ao(typeof t=="function"?t:nr(t)))}var co=Array.prototype.filter;function lo(){return Array.from(this.children)}function fo(t){return function(){return co.call(this.children,t)}}function ho(t){return this.selectAll(t==null?lo:fo(typeof t=="function"?t:nr(t)))}function po(t){typeof t!="function"&&(t=tr(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,u=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&u.push(l);return new it(i,this._parents)}function er(t){return new Array(t.length)}function go(){return new it(this._enter||this._groups.map(er),this._parents)}function Rn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Rn.prototype={constructor:Rn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function mo(t){return function(){return t}}function yo(t,n,e,i,r,o){for(var a=0,u,l=n.length,c=o.length;a<c;++a)(u=n[a])?(u.__data__=o[a],i[a]=u):e[a]=new Rn(t,o[a]);for(;a<l;++a)(u=n[a])&&(r[a]=u)}function vo(t,n,e,i,r,o,a){var u,l,c=new Map,s=n.length,h=o.length,f=new Array(s),p;for(u=0;u<s;++u)(l=n[u])&&(f[u]=p=a.call(l,l.__data__,u,n)+"",c.has(p)?r[u]=l:c.set(p,l));for(u=0;u<h;++u)p=a.call(t,o[u],u,o)+"",(l=c.get(p))?(i[u]=l,l.__data__=o[u],c.delete(p)):e[u]=new Rn(t,o[u]);for(u=0;u<s;++u)(l=n[u])&&c.get(f[u])===l&&(r[u]=l)}function wo(t){return t.__data__}function _o(t,n){if(!arguments.length)return Array.from(this,wo);var e=n?vo:yo,i=this._parents,r=this._groups;typeof t!="function"&&(t=mo(t));for(var o=r.length,a=new Array(o),u=new Array(o),l=new Array(o),c=0;c<o;++c){var s=i[c],h=r[c],f=h.length,p=xo(t.call(s,s&&s.__data__,c,i)),y=p.length,w=u[c]=new Array(y),_=a[c]=new Array(y),v=l[c]=new Array(f);e(s,h,w,_,v,p,n);for(var S=0,M=0,E,N;S<y;++S)if(E=w[S]){for(S>=M&&(M=S+1);!(N=_[M])&&++M<y;);E._next=N||null}}return a=new it(a,i),a._enter=u,a._exit=l,a}function xo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Eo(){return new it(this._exit||this._groups.map(er),this._parents)}function So(t,n,e){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(r=n(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function Mo(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,r=e.length,o=i.length,a=Math.min(r,o),u=new Array(r),l=0;l<a;++l)for(var c=e[l],s=i[l],h=c.length,f=u[l]=new Array(h),p,y=0;y<h;++y)(p=c[y]||s[y])&&(f[y]=p);for(;l<r;++l)u[l]=e[l];return new it(u,this._parents)}function $o(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function No(t){t||(t=To);function n(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var a=e[o],u=a.length,l=r[o]=new Array(u),c,s=0;s<u;++s)(c=a[s])&&(l[s]=c);l.sort(n)}return new it(r,this._parents).order()}function To(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Co(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function bo(){return Array.from(this)}function Ao(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function Io(){let t=0;for(const n of this)++t;return t}function Po(){return!this.node()}function Ro(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],o=0,a=r.length,u;o<a;++o)(u=r[o])&&t.call(u,u.__data__,o,r);return this}function ko(t){return function(){this.removeAttribute(t)}}function zo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lo(t,n){return function(){this.setAttribute(t,n)}}function Oo(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Bo(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Fo(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Do(t,n){var e=oe(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?zo:ko:typeof n=="function"?e.local?Fo:Bo:e.local?Oo:Lo)(e,n))}function ir(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Xo(t){return function(){this.style.removeProperty(t)}}function qo(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Yo(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function Ho(t,n,e){return arguments.length>1?this.each((n==null?Xo:typeof n=="function"?Yo:qo)(t,n,e??"")):Dt(this.node(),t)}function Dt(t,n){return t.style.getPropertyValue(n)||ir(t).getComputedStyle(t,null).getPropertyValue(n)}function Vo(t){return function(){delete this[t]}}function Go(t,n){return function(){this[t]=n}}function Uo(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Wo(t,n){return arguments.length>1?this.each((n==null?Vo:typeof n=="function"?Uo:Go)(t,n)):this.node()[t]}function rr(t){return t.trim().split(/^|\s+/)}function je(t){return t.classList||new or(t)}function or(t){this._node=t,this._names=rr(t.getAttribute("class")||"")}or.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ar(t,n){for(var e=je(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function sr(t,n){for(var e=je(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function Zo(t){return function(){ar(this,t)}}function Ko(t){return function(){sr(this,t)}}function Qo(t,n){return function(){(n.apply(this,arguments)?ar:sr)(this,t)}}function Jo(t,n){var e=rr(t+"");if(arguments.length<2){for(var i=je(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?Qo:n?Zo:Ko)(e,n))}function jo(){this.textContent=""}function ta(t){return function(){this.textContent=t}}function na(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function ea(t){return arguments.length?this.each(t==null?jo:(typeof t=="function"?na:ta)(t)):this.node().textContent}function ia(){this.innerHTML=""}function ra(t){return function(){this.innerHTML=t}}function oa(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function aa(t){return arguments.length?this.each(t==null?ia:(typeof t=="function"?oa:ra)(t)):this.node().innerHTML}function sa(){this.nextSibling&&this.parentNode.appendChild(this)}function ua(){return this.each(sa)}function ca(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function la(){return this.each(ca)}function fa(t){var n=typeof t=="function"?t:Ji(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function ha(){return null}function pa(t,n){var e=typeof t=="function"?t:Ji(t),i=n==null?ha:typeof n=="function"?n:Je(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function da(){var t=this.parentNode;t&&t.removeChild(this)}function ga(){return this.each(da)}function ma(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ya(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function va(t){return this.select(t?ya:ma)}function wa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _a(t){return function(n){t.call(this,n,this.__data__)}}function xa(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function Ea(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,o;e<r;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function Sa(t,n,e){return function(){var i=this.__on,r,o=_a(n);if(i){for(var a=0,u=i.length;a<u;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=n;return}}this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function Ma(t,n,e){var i=xa(t+""),r,o=i.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,c=u.length,s;l<c;++l)for(r=0,s=u[l];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value}return}for(u=n?Sa:Ea,r=0;r<o;++r)this.each(u(i[r],n,e));return this}function ur(t,n,e){var i=ir(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function $a(t,n){return function(){return ur(this,t,n)}}function Na(t,n){return function(){return ur(this,t,n.apply(this,arguments))}}function Ta(t,n){return this.each((typeof n=="function"?Na:$a)(t,n))}function*Ca(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var cr=[null];function it(t,n){this._groups=t,this._parents=n}function dn(){return new it([[document.documentElement]],cr)}function ba(){return this}it.prototype=dn.prototype={constructor:it,select:to,selectAll:ro,selectChild:uo,selectChildren:ho,filter:po,data:_o,enter:go,exit:Eo,join:So,merge:Mo,selection:ba,order:$o,sort:No,call:Co,nodes:bo,node:Ao,size:Io,empty:Po,each:Ro,attr:Do,style:Ho,property:Wo,classed:Jo,text:ea,html:aa,raise:ua,lower:la,append:fa,insert:pa,remove:ga,clone:va,datum:wa,on:Ma,dispatch:Ta,[Symbol.iterator]:Ca};function j(t){return typeof t=="string"?new it([[document.querySelector(t)]],[document.documentElement]):new it([[t]],cr)}function Aa(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Nt(t,n){if(t=Aa(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const Gc={passive:!1},xe={capture:!0,passive:!1};function Uc(t){t.stopImmediatePropagation()}function Ee(t){t.preventDefault(),t.stopImmediatePropagation()}function Ia(t){var n=t.document.documentElement,e=j(t).on("dragstart.drag",Ee,xe);"onselectstart"in n?e.on("selectstart.drag",Ee,xe):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Pa(t,n){var e=t.document.documentElement,i=j(t).on("dragstart.drag",null);n&&(i.on("click.drag",Ee,xe),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function ti(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function lr(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function gn(){}var rn=.7,kn=1/rn,Bt="\\s*([+-]?\\d+)\\s*",on="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ra=/^#([0-9a-f]{3,8})$/,ka=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),za=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),La=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${on}\\)$`),Oa=new RegExp(`^rgba\\(${dt},${dt},${dt},${on}\\)$`),Ba=new RegExp(`^hsl\\(${on},${dt},${dt}\\)$`),Fa=new RegExp(`^hsla\\(${on},${dt},${dt},${on}\\)$`),fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ti(gn,an,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:hi,formatHex:hi,formatHex8:Da,formatHsl:Xa,formatRgb:pi,toString:pi});function hi(){return this.rgb().formatHex()}function Da(){return this.rgb().formatHex8()}function Xa(){return fr(this).formatHsl()}function pi(){return this.rgb().formatRgb()}function an(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Ra.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?di(n):e===3?new tt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?yn(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?yn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ka.exec(t))?new tt(n[1],n[2],n[3],1):(n=za.exec(t))?new tt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=La.exec(t))?yn(n[1],n[2],n[3],n[4]):(n=Oa.exec(t))?yn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Ba.exec(t))?yi(n[1],n[2]/100,n[3]/100,1):(n=Fa.exec(t))?yi(n[1],n[2]/100,n[3]/100,n[4]):fi.hasOwnProperty(t)?di(fi[t]):t==="transparent"?new tt(NaN,NaN,NaN,0):null}function di(t){return new tt(t>>16&255,t>>8&255,t&255,1)}function yn(t,n,e,i){return i<=0&&(t=n=e=NaN),new tt(t,n,e,i)}function qa(t){return t instanceof gn||(t=an(t)),t?(t=t.rgb(),new tt(t.r,t.g,t.b,t.opacity)):new tt}function Se(t,n,e,i){return arguments.length===1?qa(t):new tt(t,n,e,i??1)}function tt(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}ti(tt,Se,lr(gn,{brighter(t){return t=t==null?kn:Math.pow(kn,t),new tt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rn:Math.pow(rn,t),new tt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new tt(bt(this.r),bt(this.g),bt(this.b),zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gi,formatHex:gi,formatHex8:Ya,formatRgb:mi,toString:mi}));function gi(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function Ya(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function mi(){const t=zn(this.opacity);return`${t===1?"rgb(":"rgba("}${bt(this.r)}, ${bt(this.g)}, ${bt(this.b)}${t===1?")":`, ${t})`}`}function zn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ct(t){return t=bt(t),(t<16?"0":"")+t.toString(16)}function yi(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new st(t,n,e,i)}function fr(t){if(t instanceof st)return new st(t.h,t.s,t.l,t.opacity);if(t instanceof gn||(t=an(t)),!t)return new st;if(t instanceof st)return t;t=t.rgb();var n=t.r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),o=Math.max(n,e,i),a=NaN,u=o-r,l=(o+r)/2;return u?(n===o?a=(e-i)/u+(e<i)*6:e===o?a=(i-n)/u+2:a=(n-e)/u+4,u/=l<.5?o+r:2-o-r,a*=60):u=l>0&&l<1?0:a,new st(a,u,l,t.opacity)}function Ha(t,n,e,i){return arguments.length===1?fr(t):new st(t,n,e,i??1)}function st(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}ti(st,Ha,lr(gn,{brighter(t){return t=t==null?kn:Math.pow(kn,t),new st(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rn:Math.pow(rn,t),new st(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new tt(le(t>=240?t-240:t+120,r,i),le(t,r,i),le(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new st(vi(this.h),vn(this.s),vn(this.l),zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zn(this.opacity);return`${t===1?"hsl(":"hsla("}${vi(this.h)}, ${vn(this.s)*100}%, ${vn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function vi(t){return t=(t||0)%360,t<0?t+360:t}function vn(t){return Math.max(0,Math.min(1,t||0))}function le(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const hr=t=>()=>t;function Va(t,n){return function(e){return t+e*n}}function Ga(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}function Ua(t){return(t=+t)==1?pr:function(n,e){return e-n?Ga(n,e,t):hr(isNaN(n)?e:n)}}function pr(t,n){var e=n-t;return e?Va(t,e):hr(isNaN(t)?n:t)}const wi=function t(n){var e=Ua(n);function i(r,o){var a=e((r=Se(r)).r,(o=Se(o)).r),u=e(r.g,o.g),l=e(r.b,o.b),c=pr(r.opacity,o.opacity);return function(s){return r.r=a(s),r.g=u(s),r.b=l(s),r.opacity=c(s),r+""}}return i.gamma=t,i}(1);function St(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fe=new RegExp(Me.source,"g");function Wa(t){return function(){return t}}function Za(t){return function(n){return t(n)+""}}function Ka(t,n){var e=Me.lastIndex=fe.lastIndex=0,i,r,o,a=-1,u=[],l=[];for(t=t+"",n=n+"";(i=Me.exec(t))&&(r=fe.exec(n));)(o=r.index)>e&&(o=n.slice(e,o),u[a]?u[a]+=o:u[++a]=o),(i=i[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:St(i,r)})),e=fe.lastIndex;return e<n.length&&(o=n.slice(e),u[a]?u[a]+=o:u[++a]=o),u.length<2?l[0]?Za(l[0].x):Wa(n):(n=l.length,function(c){for(var s=0,h;s<n;++s)u[(h=l[s]).i]=h.x(c);return u.join("")})}var _i=180/Math.PI,$e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dr(t,n,e,i,r,o){var a,u,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*i)&&(e-=t*l,i-=n*l),(u=Math.sqrt(e*e+i*i))&&(e/=u,i/=u,l/=u),t*i<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*_i,skewX:Math.atan(l)*_i,scaleX:a,scaleY:u}}var wn;function Qa(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?$e:dr(n.a,n.b,n.c,n.d,n.e,n.f)}function Ja(t){return t==null||(wn||(wn=document.createElementNS("http://www.w3.org/2000/svg","g")),wn.setAttribute("transform",t),!(t=wn.transform.baseVal.consolidate()))?$e:(t=t.matrix,dr(t.a,t.b,t.c,t.d,t.e,t.f))}function gr(t,n,e,i){function r(c){return c.length?c.pop()+" ":""}function o(c,s,h,f,p,y){if(c!==h||s!==f){var w=p.push("translate(",null,n,null,e);y.push({i:w-4,x:St(c,h)},{i:w-2,x:St(s,f)})}else(h||f)&&p.push("translate("+h+n+f+e)}function a(c,s,h,f){c!==s?(c-s>180?s+=360:s-c>180&&(c+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:St(c,s)})):s&&h.push(r(h)+"rotate("+s+i)}function u(c,s,h,f){c!==s?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:St(c,s)}):s&&h.push(r(h)+"skewX("+s+i)}function l(c,s,h,f,p,y){if(c!==h||s!==f){var w=p.push(r(p)+"scale(",null,",",null,")");y.push({i:w-4,x:St(c,h)},{i:w-2,x:St(s,f)})}else(h!==1||f!==1)&&p.push(r(p)+"scale("+h+","+f+")")}return function(c,s){var h=[],f=[];return c=t(c),s=t(s),o(c.translateX,c.translateY,s.translateX,s.translateY,h,f),a(c.rotate,s.rotate,h,f),u(c.skewX,s.skewX,h,f),l(c.scaleX,c.scaleY,s.scaleX,s.scaleY,h,f),c=s=null,function(p){for(var y=-1,w=f.length,_;++y<w;)h[(_=f[y]).i]=_.x(p);return h.join("")}}}var ja=gr(Qa,"px, ","px)","deg)"),ts=gr(Ja,", ",")",")"),ns=1e-12;function xi(t){return((t=Math.exp(t))+1/t)/2}function es(t){return((t=Math.exp(t))-1/t)/2}function is(t){return((t=Math.exp(2*t))-1)/(t+1)}const rs=function t(n,e,i){function r(o,a){var u=o[0],l=o[1],c=o[2],s=a[0],h=a[1],f=a[2],p=s-u,y=h-l,w=p*p+y*y,_,v;if(w<ns)v=Math.log(f/c)/n,_=function(I){return[u+I*p,l+I*y,c*Math.exp(n*I*v)]};else{var S=Math.sqrt(w),M=(f*f-c*c+i*w)/(2*c*e*S),E=(f*f-c*c-i*w)/(2*f*e*S),N=Math.log(Math.sqrt(M*M+1)-M),T=Math.log(Math.sqrt(E*E+1)-E);v=(T-N)/n,_=function(I){var P=I*v,R=xi(N),F=c/(e*S)*(R*is(n*P+N)-es(N));return[u+F*p,l+F*y,c*R/xi(n*P+N)]}}return _.duration=v*1e3*n/Math.SQRT2,_}return r.rho=function(o){var a=Math.max(.001,+o),u=a*a,l=u*u;return t(a,u,l)},r}(Math.SQRT2,2,4);var Xt=0,Gt=0,Ht=0,mr=1e3,Ln,Ut,On=0,It=0,ae=0,sn=typeof performance=="object"&&performance.now?performance:Date,yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ni(){return It||(yr(os),It=sn.now()+ae)}function os(){It=0}function Bn(){this._call=this._time=this._next=null}Bn.prototype=vr.prototype={constructor:Bn,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?ni():+e)+(n==null?0:+n),!this._next&&Ut!==this&&(Ut?Ut._next=this:Ln=this,Ut=this),this._call=t,this._time=e,Ne()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ne())}};function vr(t,n,e){var i=new Bn;return i.restart(t,n,e),i}function as(){ni(),++Xt;for(var t=Ln,n;t;)(n=It-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Xt}function Ei(){It=(On=sn.now())+ae,Xt=Gt=0;try{as()}finally{Xt=0,us(),It=0}}function ss(){var t=sn.now(),n=t-On;n>mr&&(ae-=n,On=t)}function us(){for(var t,n=Ln,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ln=e);Ut=t,Ne(i)}function Ne(t){if(!Xt){Gt&&(Gt=clearTimeout(Gt));var n=t-It;n>24?(t<1/0&&(Gt=setTimeout(Ei,t-sn.now()-ae)),Ht&&(Ht=clearInterval(Ht))):(Ht||(On=sn.now(),Ht=setInterval(ss,mr)),Xt=1,yr(Ei))}}function Si(t,n,e){var i=new Bn;return n=n==null?0:+n,i.restart(r=>{i.stop(),t(r+n)},n,e),i}var cs=Qe("start","end","cancel","interrupt"),ls=[],wr=0,Mi=1,Te=2,Cn=3,$i=4,Ce=5,bn=6;function se(t,n,e,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;fs(t,e,{name:n,index:i,group:r,on:cs,tween:ls,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:wr})}function ei(t,n){var e=lt(t,n);if(e.state>wr)throw new Error("too late; already scheduled");return e}function gt(t,n){var e=lt(t,n);if(e.state>Cn)throw new Error("too late; already running");return e}function lt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function fs(t,n,e){var i=t.__transition,r;i[n]=e,e.timer=vr(o,0,e.time);function o(c){e.state=Mi,e.timer.restart(a,e.delay,e.time),e.delay<=c&&a(c-e.delay)}function a(c){var s,h,f,p;if(e.state!==Mi)return l();for(s in i)if(p=i[s],p.name===e.name){if(p.state===Cn)return Si(a);p.state===$i?(p.state=bn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[s]):+s<n&&(p.state=bn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[s])}if(Si(function(){e.state===Cn&&(e.state=$i,e.timer.restart(u,e.delay,e.time),u(c))}),e.state=Te,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Te){for(e.state=Cn,r=new Array(f=e.tween.length),s=0,h=-1;s<f;++s)(p=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(r[++h]=p);r.length=h+1}}function u(c){for(var s=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=Ce,1),h=-1,f=r.length;++h<f;)r[h].call(t,s);e.state===Ce&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=bn,e.timer.stop(),delete i[n];for(var c in i)return;delete t.__transition}}function An(t,n){var e=t.__transition,i,r,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((i=e[a]).name!==n){o=!1;continue}r=i.state>Te&&i.state<Ce,i.state=bn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete e[a]}o&&delete t.__transition}}function hs(t){return this.each(function(){An(this,t)})}function ps(t,n){var e,i;return function(){var r=gt(this,t),o=r.tween;if(o!==e){i=e=o;for(var a=0,u=i.length;a<u;++a)if(i[a].name===n){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function ds(t,n,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=gt(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var u={name:n,value:e},l=0,c=r.length;l<c;++l)if(r[l].name===n){r[l]=u;break}l===c&&r.push(u)}o.tween=r}}function gs(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i=lt(this.node(),e).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((n==null?ps:ds)(e,t,n))}function ii(t,n,e){var i=t._id;return t.each(function(){var r=gt(this,i);(r.value||(r.value={}))[n]=e.apply(this,arguments)}),function(r){return lt(r,i).value[n]}}function _r(t,n){var e;return(typeof n=="number"?St:n instanceof an?wi:(e=an(n))?(n=e,wi):Ka)(t,n)}function ms(t){return function(){this.removeAttribute(t)}}function ys(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vs(t,n,e){var i,r=e+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=n(i=a,e)}}function ws(t,n,e){var i,r=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=n(i=a,e)}}function _s(t,n,e){var i,r,o;return function(){var a,u=e(this),l;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=u+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,u)))}}function xs(t,n,e){var i,r,o;return function(){var a,u=e(this),l;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=u+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,u)))}}function Es(t,n){var e=oe(t),i=e==="transform"?ts:_r;return this.attrTween(t,typeof n=="function"?(e.local?xs:_s)(e,i,ii(this,"attr."+t,n)):n==null?(e.local?ys:ms)(e):(e.local?ws:vs)(e,i,n))}function Ss(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Ms(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function $s(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&Ms(t,o)),e}return r._value=n,r}function Ns(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&Ss(t,o)),e}return r._value=n,r}function Ts(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var i=oe(t);return this.tween(e,(i.local?$s:Ns)(i,n))}function Cs(t,n){return function(){ei(this,t).delay=+n.apply(this,arguments)}}function bs(t,n){return n=+n,function(){ei(this,t).delay=n}}function As(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Cs:bs)(n,t)):lt(this.node(),n).delay}function Is(t,n){return function(){gt(this,t).duration=+n.apply(this,arguments)}}function Ps(t,n){return n=+n,function(){gt(this,t).duration=n}}function Rs(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Is:Ps)(n,t)):lt(this.node(),n).duration}function ks(t,n){if(typeof n!="function")throw new Error;return function(){gt(this,t).ease=n}}function zs(t){var n=this._id;return arguments.length?this.each(ks(n,t)):lt(this.node(),n).ease}function Ls(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;gt(this,t).ease=e}}function Os(t){if(typeof t!="function")throw new Error;return this.each(Ls(this._id,t))}function Bs(t){typeof t!="function"&&(t=tr(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,u=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&u.push(l);return new Et(i,this._parents,this._name,this._id)}function Fs(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=e[u],s=l.length,h=a[u]=new Array(s),f,p=0;p<s;++p)(f=l[p]||c[p])&&(h[p]=f);for(;u<i;++u)a[u]=n[u];return new Et(a,this._parents,this._name,this._id)}function Ds(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Xs(t,n,e){var i,r,o=Ds(n)?ei:gt;return function(){var a=o(this,t),u=a.on;u!==i&&(r=(i=u).copy()).on(n,e),a.on=r}}function qs(t,n){var e=this._id;return arguments.length<2?lt(this.node(),e).on.on(t):this.each(Xs(e,t,n))}function Ys(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Hs(){return this.on("end.remove",Ys(this._id))}function Vs(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Je(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var u=i[a],l=u.length,c=o[a]=new Array(l),s,h,f=0;f<l;++f)(s=u[f])&&(h=t.call(s,s.__data__,f,u))&&("__data__"in s&&(h.__data__=s.__data__),c[f]=h,se(c[f],n,e,f,c,lt(s,e)));return new Et(o,this._parents,n,e)}function Gs(t){var n=this._name,e=this._id;typeof t!="function"&&(t=ji(t));for(var i=this._groups,r=i.length,o=[],a=[],u=0;u<r;++u)for(var l=i[u],c=l.length,s,h=0;h<c;++h)if(s=l[h]){for(var f=t.call(s,s.__data__,h,l),p,y=lt(s,e),w=0,_=f.length;w<_;++w)(p=f[w])&&se(p,n,e,w,f,y);o.push(f),a.push(s)}return new Et(o,a,n,e)}var Us=dn.prototype.constructor;function Ws(){return new Us(this._groups,this._parents)}function Zs(t,n){var e,i,r;return function(){var o=Dt(this,t),a=(this.style.removeProperty(t),Dt(this,t));return o===a?null:o===e&&a===i?r:r=n(e=o,i=a)}}function xr(t){return function(){this.style.removeProperty(t)}}function Ks(t,n,e){var i,r=e+"",o;return function(){var a=Dt(this,t);return a===r?null:a===i?o:o=n(i=a,e)}}function Qs(t,n,e){var i,r,o;return function(){var a=Dt(this,t),u=e(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(t),Dt(this,t))),a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,u))}}function Js(t,n){var e,i,r,o="style."+n,a="end."+o,u;return function(){var l=gt(this,t),c=l.on,s=l.value[o]==null?u||(u=xr(n)):void 0;(c!==e||r!==s)&&(i=(e=c).copy()).on(a,r=s),l.on=i}}function js(t,n,e){var i=(t+="")=="transform"?ja:_r;return n==null?this.styleTween(t,Zs(t,i)).on("end.style."+t,xr(t)):typeof n=="function"?this.styleTween(t,Qs(t,i,ii(this,"style."+t,n))).each(Js(this._id,t)):this.styleTween(t,Ks(t,i,n),e).on("end.style."+t,null)}function tu(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function nu(t,n,e){var i,r;function o(){var a=n.apply(this,arguments);return a!==r&&(i=(r=a)&&tu(t,a,e)),i}return o._value=n,o}function eu(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,nu(t,n,e??""))}function iu(t){return function(){this.textContent=t}}function ru(t){return function(){var n=t(this);this.textContent=n??""}}function ou(t){return this.tween("text",typeof t=="function"?ru(ii(this,"text",t)):iu(t==null?"":t+""))}function au(t){return function(n){this.textContent=t.call(this,n)}}function su(t){var n,e;function i(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&au(r)),n}return i._value=t,i}function uu(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,su(t))}function cu(){for(var t=this._name,n=this._id,e=Er(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],u=a.length,l,c=0;c<u;++c)if(l=a[c]){var s=lt(l,n);se(l,t,e,c,a,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Et(i,this._parents,t,e)}function lu(){var t,n,e=this,i=e._id,r=e.size();return new Promise(function(o,a){var u={value:a},l={value:function(){--r===0&&o()}};e.each(function(){var c=gt(this,i),s=c.on;s!==t&&(n=(t=s).copy(),n._.cancel.push(u),n._.interrupt.push(u),n._.end.push(l)),c.on=n}),r===0&&o()})}var fu=0;function Et(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function Er(){return++fu}var vt=dn.prototype;Et.prototype={constructor:Et,select:Vs,selectAll:Gs,selectChild:vt.selectChild,selectChildren:vt.selectChildren,filter:Bs,merge:Fs,selection:Ws,transition:cu,call:vt.call,nodes:vt.nodes,node:vt.node,size:vt.size,empty:vt.empty,each:vt.each,on:qs,attr:Es,attrTween:Ts,style:js,styleTween:eu,text:ou,textTween:uu,remove:Hs,tween:gs,delay:As,duration:Rs,ease:zs,easeVarying:Os,end:lu,[Symbol.iterator]:vt[Symbol.iterator]};function hu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var pu={time:null,delay:0,duration:250,ease:hu};function du(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function gu(t){var n,e;t instanceof Et?(n=t._id,t=t._name):(n=Er(),(e=pu).time=ni(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],u=a.length,l,c=0;c<u;++c)(l=a[c])&&se(l,t,n,c,a,e||du(l,n));return new Et(i,this._parents,t,n)}dn.prototype.interrupt=hs;dn.prototype.transition=gu;var X=1e-6,be=1e-12,z=Math.PI,nt=z/2,Ni=z/4,rt=z*2,W=180/z,B=z/180,Y=Math.abs,Sr=Math.atan,Pt=Math.atan2,L=Math.cos,mu=Math.exp,Ae=Math.hypot,yu=Math.log,O=Math.sin,vu=Math.sign||function(t){return t>0?1:t<0?-1:0},$t=Math.sqrt,wu=Math.tan;function _u(t){return t>1?0:t<-1?z:Math.acos(t)}function Rt(t){return t>1?nt:t<-1?-nt:Math.asin(t)}function et(){}function Fn(t,n){t&&Ci.hasOwnProperty(t.type)&&Ci[t.type](t,n)}var Ti={Feature:function(t,n){Fn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,r=e.length;++i<r;)Fn(e[i].geometry,n)}},Ci={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)t=e[i],n.point(t[0],t[1],t[2])},LineString:function(t,n){Ie(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)Ie(e[i],n,0)},Polygon:function(t,n){bi(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)bi(e[i],n)},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,r=e.length;++i<r;)Fn(e[i],n)}};function Ie(t,n,e){var i=-1,r=t.length-e,o;for(n.lineStart();++i<r;)o=t[i],n.point(o[0],o[1],o[2]);n.lineEnd()}function bi(t,n){var e=-1,i=t.length;for(n.polygonStart();++e<i;)Ie(t[e],n,1);n.polygonEnd()}function Tt(t,n){t&&Ti.hasOwnProperty(t.type)?Ti[t.type](t,n):Fn(t,n)}function Pe(t){return[Pt(t[1],t[0]),Rt(t[2])]}function qt(t){var n=t[0],e=t[1],i=L(e);return[i*L(n),i*O(n),O(e)]}function _n(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Dn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function he(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function xn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Re(t){var n=$t(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Wt,Xn,qn,Yn,Hn,Vn,Gn,Un,ke,ze,Le,Mr,$r,Z,K,Q,ut={sphere:et,point:ri,lineStart:Ai,lineEnd:Ii,polygonStart:function(){ut.lineStart=Su,ut.lineEnd=Mu},polygonEnd:function(){ut.lineStart=Ai,ut.lineEnd=Ii}};function ri(t,n){t*=B,n*=B;var e=L(n);mn(e*L(t),e*O(t),O(n))}function mn(t,n,e){++Wt,qn+=(t-qn)/Wt,Yn+=(n-Yn)/Wt,Hn+=(e-Hn)/Wt}function Ai(){ut.point=xu}function xu(t,n){t*=B,n*=B;var e=L(n);Z=e*L(t),K=e*O(t),Q=O(n),ut.point=Eu,mn(Z,K,Q)}function Eu(t,n){t*=B,n*=B;var e=L(n),i=e*L(t),r=e*O(t),o=O(n),a=Pt($t((a=K*o-Q*r)*a+(a=Q*i-Z*o)*a+(a=Z*r-K*i)*a),Z*i+K*r+Q*o);Xn+=a,Vn+=a*(Z+(Z=i)),Gn+=a*(K+(K=r)),Un+=a*(Q+(Q=o)),mn(Z,K,Q)}function Ii(){ut.point=ri}function Su(){ut.point=$u}function Mu(){Nr(Mr,$r),ut.point=ri}function $u(t,n){Mr=t,$r=n,t*=B,n*=B,ut.point=Nr;var e=L(n);Z=e*L(t),K=e*O(t),Q=O(n),mn(Z,K,Q)}function Nr(t,n){t*=B,n*=B;var e=L(n),i=e*L(t),r=e*O(t),o=O(n),a=K*o-Q*r,u=Q*i-Z*o,l=Z*r-K*i,c=Ae(a,u,l),s=Rt(c),h=c&&-s/c;ke.add(h*a),ze.add(h*u),Le.add(h*l),Xn+=s,Vn+=s*(Z+(Z=i)),Gn+=s*(K+(K=r)),Un+=s*(Q+(Q=o)),mn(Z,K,Q)}function Wn(t){Wt=Xn=qn=Yn=Hn=Vn=Gn=Un=0,ke=new pt,ze=new pt,Le=new pt,Tt(t,ut);var n=+ke,e=+ze,i=+Le,r=Ae(n,e,i);return r<be&&(n=Vn,e=Gn,i=Un,Xn<X&&(n=qn,e=Yn,i=Hn),r=Ae(n,e,i),r<be)?[NaN,NaN]:[Pt(e,n)*W,Rt(i/r)*W]}function Oe(t,n){function e(i,r){return i=t(i,r),n(i[0],i[1])}return t.invert&&n.invert&&(e.invert=function(i,r){return i=n.invert(i,r),i&&t.invert(i[0],i[1])}),e}function Be(t,n){return Y(t)>z&&(t-=Math.round(t/rt)*rt),[t,n]}Be.invert=Be;function Tr(t,n,e){return(t%=rt)?n||e?Oe(Ri(t),ki(n,e)):Ri(t):n||e?ki(n,e):Be}function Pi(t){return function(n,e){return n+=t,Y(n)>z&&(n-=Math.round(n/rt)*rt),[n,e]}}function Ri(t){var n=Pi(t);return n.invert=Pi(-t),n}function ki(t,n){var e=L(t),i=O(t),r=L(n),o=O(n);function a(u,l){var c=L(l),s=L(u)*c,h=O(u)*c,f=O(l),p=f*e+s*i;return[Pt(h*r-p*o,s*e-f*i),Rt(p*r+h*o)]}return a.invert=function(u,l){var c=L(l),s=L(u)*c,h=O(u)*c,f=O(l),p=f*r-h*o;return[Pt(h*r+f*o,s*e+p*i),Rt(p*e-s*i)]},a}function Nu(t){t=Tr(t[0]*B,t[1]*B,t.length>2?t[2]*B:0);function n(e){return e=t(e[0]*B,e[1]*B),e[0]*=W,e[1]*=W,e}return n.invert=function(e){return e=t.invert(e[0]*B,e[1]*B),e[0]*=W,e[1]*=W,e},n}function Tu(t,n,e,i,r,o){if(e){var a=L(n),u=O(n),l=i*e;r==null?(r=n+i*rt,o=n-l/2):(r=zi(a,r),o=zi(a,o),(i>0?r<o:r>o)&&(r+=i*rt));for(var c,s=r;i>0?s>o:s<o;s-=l)c=Pe([a,-u*L(s),-u*O(s)]),t.point(c[0],c[1])}}function zi(t,n){n=qt(n),n[0]-=t,Re(n);var e=_u(-n[1]);return((-n[2]<0?-e:e)+rt-X)%rt}function Cr(){var t=[],n;return{point:function(e,i,r){n.push([e,i,r])},lineStart:function(){t.push(n=[])},lineEnd:et,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function In(t,n){return Y(t[0]-n[0])<X&&Y(t[1]-n[1])<X}function En(t,n,e,i){this.x=t,this.z=n,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function br(t,n,e,i,r){var o=[],a=[],u,l;if(t.forEach(function(y){if(!((w=y.length-1)<=0)){var w,_=y[0],v=y[w],S;if(In(_,v)){if(!_[2]&&!v[2]){for(r.lineStart(),u=0;u<w;++u)r.point((_=y[u])[0],_[1]);r.lineEnd();return}v[0]+=2*X}o.push(S=new En(_,y,null,!0)),a.push(S.o=new En(_,null,S,!1)),o.push(S=new En(v,y,null,!1)),a.push(S.o=new En(v,null,S,!0))}}),!!o.length){for(a.sort(n),Li(o),Li(a),u=0,l=a.length;u<l;++u)a[u].e=e=!e;for(var c=o[0],s,h;;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return;s=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(u=0,l=s.length;u<l;++u)r.point((h=s[u])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(s=f.p.z,u=s.length-1;u>=0;--u)r.point((h=s[u])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,s=f.z,p=!p}while(!f.v);r.lineEnd()}}}function Li(t){if(n=t.length){for(var n,e=0,i=t[0],r;++e<n;)i.n=r=t[e],r.p=i,i=r;i.n=r=t[0],r.p=i}}function pe(t){return Y(t[0])<=z?t[0]:vu(t[0])*((Y(t[0])+z)%rt-z)}function Cu(t,n){var e=pe(n),i=n[1],r=O(i),o=[O(e),-L(e),0],a=0,u=0,l=new pt;r===1?i=nt+X:r===-1&&(i=-nt-X);for(var c=0,s=t.length;c<s;++c)if(f=(h=t[c]).length)for(var h,f,p=h[f-1],y=pe(p),w=p[1]/2+Ni,_=O(w),v=L(w),S=0;S<f;++S,y=E,_=T,v=I,p=M){var M=h[S],E=pe(M),N=M[1]/2+Ni,T=O(N),I=L(N),P=E-y,R=P>=0?1:-1,F=R*P,b=F>z,U=_*T;if(l.add(Pt(U*R*O(F),v*I+U*L(F))),a+=b?P+R*rt:P,b^y>=e^E>=e){var q=Dn(qt(p),qt(M));Re(q);var d=Dn(o,q);Re(d);var g=(b^P>=0?-1:1)*Rt(d[2]);(i>g||i===g&&(q[0]||q[1]))&&(u+=b^P>=0?1:-1)}}return(a<-X||a<X&&l<-be)^u&1}function Ar(t,n,e,i){return function(r){var o=n(r),a=Cr(),u=n(a),l=!1,c,s,h,f={point:p,lineStart:w,lineEnd:_,polygonStart:function(){f.point=v,f.lineStart=S,f.lineEnd=M,s=[],c=[]},polygonEnd:function(){f.point=p,f.lineStart=w,f.lineEnd=_,s=Qi(s);var E=Cu(c,i);s.length?(l||(r.polygonStart(),l=!0),br(s,Au,E,e,r)):E&&(l||(r.polygonStart(),l=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),s=c=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(E,N){t(E,N)&&r.point(E,N)}function y(E,N){o.point(E,N)}function w(){f.point=y,o.lineStart()}function _(){f.point=p,o.lineEnd()}function v(E,N){h.push([E,N]),u.point(E,N)}function S(){u.lineStart(),h=[]}function M(){v(h[0][0],h[0][1]),u.lineEnd();var E=u.clean(),N=a.result(),T,I=N.length,P,R,F;if(h.pop(),c.push(h),h=null,!!I){if(E&1){if(R=N[0],(P=R.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),T=0;T<P;++T)r.point((F=R[T])[0],F[1]);r.lineEnd()}return}I>1&&E&2&&N.push(N.pop().concat(N.shift())),s.push(N.filter(bu))}}return f}}function bu(t){return t.length>1}function Au(t,n){return((t=t.x)[0]<0?t[1]-nt-X:nt-t[1])-((n=n.x)[0]<0?n[1]-nt-X:nt-n[1])}const Oi=Ar(function(){return!0},Iu,Ru,[-z,-nt]);function Iu(t){var n=NaN,e=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var u=o>0?z:-z,l=Y(o-n);Y(l-z)<X?(t.point(n,e=(e+a)/2>0?nt:-nt),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(u,e),t.point(o,e),r=0):i!==u&&l>=z&&(Y(n-i)<X&&(n-=i*X),Y(o-u)<X&&(o-=u*X),e=Pu(n,e,o,a),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(u,e),r=0),t.point(n=o,e=a),i=u},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-r}}}function Pu(t,n,e,i){var r,o,a=O(t-e);return Y(a)>X?Sr((O(n)*(o=L(i))*O(e)-O(i)*(r=L(n))*O(t))/(r*o*a)):(n+i)/2}function Ru(t,n,e,i){var r;if(t==null)r=e*nt,i.point(-z,r),i.point(0,r),i.point(z,r),i.point(z,0),i.point(z,-r),i.point(0,-r),i.point(-z,-r),i.point(-z,0),i.point(-z,r);else if(Y(t[0]-n[0])>X){var o=t[0]<n[0]?z:-z;r=e*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(n[0],n[1])}function ku(t){var n=L(t),e=2*B,i=n>0,r=Y(n)>X;function o(s,h,f,p){Tu(p,t,e,f,s,h)}function a(s,h){return L(s)*L(h)>n}function u(s){var h,f,p,y,w;return{lineStart:function(){y=p=!1,w=1},point:function(_,v){var S=[_,v],M,E=a(_,v),N=i?E?0:c(_,v):E?c(_+(_<0?z:-z),v):0;if(!h&&(y=p=E)&&s.lineStart(),E!==p&&(M=l(h,S),(!M||In(h,M)||In(S,M))&&(S[2]=1)),E!==p)w=0,E?(s.lineStart(),M=l(S,h),s.point(M[0],M[1])):(M=l(h,S),s.point(M[0],M[1],2),s.lineEnd()),h=M;else if(r&&h&&i^E){var T;!(N&f)&&(T=l(S,h,!0))&&(w=0,i?(s.lineStart(),s.point(T[0][0],T[0][1]),s.point(T[1][0],T[1][1]),s.lineEnd()):(s.point(T[1][0],T[1][1]),s.lineEnd(),s.lineStart(),s.point(T[0][0],T[0][1],3)))}E&&(!h||!In(h,S))&&s.point(S[0],S[1]),h=S,p=E,f=N},lineEnd:function(){p&&s.lineEnd(),h=null},clean:function(){return w|(y&&p)<<1}}}function l(s,h,f){var p=qt(s),y=qt(h),w=[1,0,0],_=Dn(p,y),v=_n(_,_),S=_[0],M=v-S*S;if(!M)return!f&&s;var E=n*v/M,N=-n*S/M,T=Dn(w,_),I=xn(w,E),P=xn(_,N);he(I,P);var R=T,F=_n(I,R),b=_n(R,R),U=F*F-b*(_n(I,I)-1);if(!(U<0)){var q=$t(U),d=xn(R,(-F-q)/b);if(he(d,I),d=Pe(d),!f)return d;var g=s[0],m=h[0],x=s[1],$=h[1],C;m<g&&(C=g,g=m,m=C);var A=m-g,k=Y(A-z)<X,D=k||A<X;if(!k&&$<x&&(C=x,x=$,$=C),D?k?x+$>0^d[1]<(Y(d[0]-g)<X?x:$):x<=d[1]&&d[1]<=$:A>z^(g<=d[0]&&d[0]<=m)){var V=xn(R,(-F+q)/b);return he(V,I),[d,Pe(V)]}}}function c(s,h){var f=i?t:z-t,p=0;return s<-f?p|=1:s>f&&(p|=2),h<-f?p|=4:h>f&&(p|=8),p}return Ar(a,u,o,i?[0,-t]:[-z,t-z])}function zu(t,n,e,i,r,o){var a=t[0],u=t[1],l=n[0],c=n[1],s=0,h=1,f=l-a,p=c-u,y;if(y=e-a,!(!f&&y>0)){if(y/=f,f<0){if(y<s)return;y<h&&(h=y)}else if(f>0){if(y>h)return;y>s&&(s=y)}if(y=r-a,!(!f&&y<0)){if(y/=f,f<0){if(y>h)return;y>s&&(s=y)}else if(f>0){if(y<s)return;y<h&&(h=y)}if(y=i-u,!(!p&&y>0)){if(y/=p,p<0){if(y<s)return;y<h&&(h=y)}else if(p>0){if(y>h)return;y>s&&(s=y)}if(y=o-u,!(!p&&y<0)){if(y/=p,p<0){if(y>h)return;y>s&&(s=y)}else if(p>0){if(y<s)return;y<h&&(h=y)}return s>0&&(t[0]=a+s*f,t[1]=u+s*p),h<1&&(n[0]=a+h*f,n[1]=u+h*p),!0}}}}}var Zt=1e9,Sn=-Zt;function Lu(t,n,e,i){function r(c,s){return t<=c&&c<=e&&n<=s&&s<=i}function o(c,s,h,f){var p=0,y=0;if(c==null||(p=a(c,h))!==(y=a(s,h))||l(c,s)<0^h>0)do f.point(p===0||p===3?t:e,p>1?i:n);while((p=(p+h+4)%4)!==y);else f.point(s[0],s[1])}function a(c,s){return Y(c[0]-t)<X?s>0?0:3:Y(c[0]-e)<X?s>0?2:1:Y(c[1]-n)<X?s>0?1:0:s>0?3:2}function u(c,s){return l(c.x,s.x)}function l(c,s){var h=a(c,1),f=a(s,1);return h!==f?h-f:h===0?s[1]-c[1]:h===1?c[0]-s[0]:h===2?c[1]-s[1]:s[0]-c[0]}return function(c){var s=c,h=Cr(),f,p,y,w,_,v,S,M,E,N,T,I={point:P,lineStart:U,lineEnd:q,polygonStart:F,polygonEnd:b};function P(g,m){r(g,m)&&s.point(g,m)}function R(){for(var g=0,m=0,x=p.length;m<x;++m)for(var $=p[m],C=1,A=$.length,k=$[0],D,V,H=k[0],G=k[1];C<A;++C)D=H,V=G,k=$[C],H=k[0],G=k[1],V<=i?G>i&&(H-D)*(i-V)>(G-V)*(t-D)&&++g:G<=i&&(H-D)*(i-V)<(G-V)*(t-D)&&--g;return g}function F(){s=h,f=[],p=[],T=!0}function b(){var g=R(),m=T&&g,x=(f=Qi(f)).length;(m||x)&&(c.polygonStart(),m&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),x&&br(f,u,g,o,c),c.polygonEnd()),s=c,f=p=y=null}function U(){I.point=d,p&&p.push(y=[]),N=!0,E=!1,S=M=NaN}function q(){f&&(d(w,_),v&&E&&h.rejoin(),f.push(h.result())),I.point=P,E&&s.lineEnd()}function d(g,m){var x=r(g,m);if(p&&y.push([g,m]),N)w=g,_=m,v=x,N=!1,x&&(s.lineStart(),s.point(g,m));else if(x&&E)s.point(g,m);else{var $=[S=Math.max(Sn,Math.min(Zt,S)),M=Math.max(Sn,Math.min(Zt,M))],C=[g=Math.max(Sn,Math.min(Zt,g)),m=Math.max(Sn,Math.min(Zt,m))];zu($,C,t,n,e,i)?(E||(s.lineStart(),s.point($[0],$[1])),s.point(C[0],C[1]),x||s.lineEnd(),T=!1):x&&(s.lineStart(),s.point(g,m),T=!1)}S=g,M=m,E=x}return I}}const Fe=t=>t;var de=new pt,De=new pt,Ir,Pr,Xe,qe,_t={point:et,lineStart:et,lineEnd:et,polygonStart:function(){_t.lineStart=Ou,_t.lineEnd=Fu},polygonEnd:function(){_t.lineStart=_t.lineEnd=_t.point=et,de.add(Y(De)),De=new pt},result:function(){var t=de/2;return de=new pt,t}};function Ou(){_t.point=Bu}function Bu(t,n){_t.point=Rr,Ir=Xe=t,Pr=qe=n}function Rr(t,n){De.add(qe*t-Xe*n),Xe=t,qe=n}function Fu(){Rr(Ir,Pr)}var Yt=1/0,Zn=Yt,un=-Yt,Kn=un,Qn={point:Du,lineStart:et,lineEnd:et,polygonStart:et,polygonEnd:et,result:function(){var t=[[Yt,Zn],[un,Kn]];return un=Kn=-(Zn=Yt=1/0),t}};function Du(t,n){t<Yt&&(Yt=t),t>un&&(un=t),n<Zn&&(Zn=n),n>Kn&&(Kn=n)}var Ye=0,He=0,Kt=0,Jn=0,jn=0,Ot=0,Ve=0,Ge=0,Qt=0,kr,zr,ft,ht,ot={point:kt,lineStart:Bi,lineEnd:Fi,polygonStart:function(){ot.lineStart=Yu,ot.lineEnd=Hu},polygonEnd:function(){ot.point=kt,ot.lineStart=Bi,ot.lineEnd=Fi},result:function(){var t=Qt?[Ve/Qt,Ge/Qt]:Ot?[Jn/Ot,jn/Ot]:Kt?[Ye/Kt,He/Kt]:[NaN,NaN];return Ye=He=Kt=Jn=jn=Ot=Ve=Ge=Qt=0,t}};function kt(t,n){Ye+=t,He+=n,++Kt}function Bi(){ot.point=Xu}function Xu(t,n){ot.point=qu,kt(ft=t,ht=n)}function qu(t,n){var e=t-ft,i=n-ht,r=$t(e*e+i*i);Jn+=r*(ft+t)/2,jn+=r*(ht+n)/2,Ot+=r,kt(ft=t,ht=n)}function Fi(){ot.point=kt}function Yu(){ot.point=Vu}function Hu(){Lr(kr,zr)}function Vu(t,n){ot.point=Lr,kt(kr=ft=t,zr=ht=n)}function Lr(t,n){var e=t-ft,i=n-ht,r=$t(e*e+i*i);Jn+=r*(ft+t)/2,jn+=r*(ht+n)/2,Ot+=r,r=ht*t-ft*n,Ve+=r*(ft+t),Ge+=r*(ht+n),Qt+=r*3,kt(ft=t,ht=n)}function Or(t){this._context=t}Or.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,rt);break}}},result:et};var Ue=new pt,ge,Br,Fr,Jt,jt,cn={point:et,lineStart:function(){cn.point=Gu},lineEnd:function(){ge&&Dr(Br,Fr),cn.point=et},polygonStart:function(){ge=!0},polygonEnd:function(){ge=null},result:function(){var t=+Ue;return Ue=new pt,t}};function Gu(t,n){cn.point=Dr,Br=Jt=t,Fr=jt=n}function Dr(t,n){Jt-=t,jt-=n,Ue.add($t(Jt*Jt+jt*jt)),Jt=t,jt=n}let Di,te,Xi,qi;class Yi{constructor(n){this._append=n==null?Xr:Uu(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==Xi||this._append!==te){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Xi=i,te=this._append,qi=this._,this._=r}this._+=qi;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Xr(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Uu(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Xr;if(n!==Di){const e=10**n;Di=n,te=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*e)/e+r[o]}}return te}function Wu(t,n){let e=3,i=4.5,r,o;function a(u){return u&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Tt(u,r(o))),o.result()}return a.area=function(u){return Tt(u,r(_t)),_t.result()},a.measure=function(u){return Tt(u,r(cn)),cn.result()},a.bounds=function(u){return Tt(u,r(Qn)),Qn.result()},a.centroid=function(u){return Tt(u,r(ot)),ot.result()},a.projection=function(u){return arguments.length?(r=u==null?(t=null,Fe):(t=u).stream,a):t},a.context=function(u){return arguments.length?(o=u==null?(n=null,new Yi(e)):new Or(n=u),typeof i!="function"&&o.pointRadius(i),a):n},a.pointRadius=function(u){return arguments.length?(i=typeof u=="function"?u:(o.pointRadius(+u),+u),a):i},a.digits=function(u){if(!arguments.length)return e;if(u==null)e=null;else{const l=Math.floor(u);if(!(l>=0))throw new RangeError(`invalid digits: ${u}`);e=l}return n===null&&(o=new Yi(e)),a},a.projection(t).digits(e).context(n)}function oi(t){return function(n){var e=new We;for(var i in t)e[i]=t[i];return e.stream=n,e}}function We(){}We.prototype={constructor:We,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ai(t,n,e){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Tt(e,t.stream(Qn)),n(Qn.result()),i!=null&&t.clipExtent(i),t}function qr(t,n,e){return ai(t,function(i){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),u=+n[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+n[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([u,l])},e)}function Zu(t,n,e){return qr(t,[[0,0],n],e)}function Ku(t,n,e){return ai(t,function(i){var r=+n,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,u=-o*i[0][1];t.scale(150*o).translate([a,u])},e)}function Qu(t,n,e){return ai(t,function(i){var r=+n,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],u=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,u])},e)}var Hi=16,Ju=L(30*B);function Vi(t,n){return+n?tc(t,n):ju(t)}function ju(t){return oi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function tc(t,n){function e(i,r,o,a,u,l,c,s,h,f,p,y,w,_){var v=c-i,S=s-r,M=v*v+S*S;if(M>4*n&&w--){var E=a+f,N=u+p,T=l+y,I=$t(E*E+N*N+T*T),P=Rt(T/=I),R=Y(Y(T)-1)<X||Y(o-h)<X?(o+h)/2:Pt(N,E),F=t(R,P),b=F[0],U=F[1],q=b-i,d=U-r,g=S*q-v*d;(g*g/M>n||Y((v*q+S*d)/M-.5)>.3||a*f+u*p+l*y<Ju)&&(e(i,r,o,a,u,l,b,U,R,E/=I,N/=I,T,w,_),_.point(b,U),e(b,U,R,E,N,T,c,s,h,f,p,y,w,_))}}return function(i){var r,o,a,u,l,c,s,h,f,p,y,w,_={point:v,lineStart:S,lineEnd:E,polygonStart:function(){i.polygonStart(),_.lineStart=N},polygonEnd:function(){i.polygonEnd(),_.lineStart=S}};function v(P,R){P=t(P,R),i.point(P[0],P[1])}function S(){h=NaN,_.point=M,i.lineStart()}function M(P,R){var F=qt([P,R]),b=t(P,R);e(h,f,s,p,y,w,h=b[0],f=b[1],s=P,p=F[0],y=F[1],w=F[2],Hi,i),i.point(h,f)}function E(){_.point=v,i.lineEnd()}function N(){S(),_.point=T,_.lineEnd=I}function T(P,R){M(r=P,R),o=h,a=f,u=p,l=y,c=w,_.point=M}function I(){e(h,f,s,p,y,w,o,a,r,u,l,c,Hi,i),_.lineEnd=E,E()}return _}}var nc=oi({point:function(t,n){this.stream.point(t*B,n*B)}});function ec(t){return oi({point:function(n,e){var i=t(n,e);return this.stream.point(i[0],i[1])}})}function ic(t,n,e,i,r){function o(a,u){return a*=i,u*=r,[n+t*a,e-t*u]}return o.invert=function(a,u){return[(a-n)/t*i,(e-u)/t*r]},o}function Gi(t,n,e,i,r,o){if(!o)return ic(t,n,e,i,r);var a=L(o),u=O(o),l=a*t,c=u*t,s=a/t,h=u/t,f=(u*e-a*n)/t,p=(u*n+a*e)/t;function y(w,_){return w*=i,_*=r,[l*w-c*_+n,e-c*w-l*_]}return y.invert=function(w,_){return[i*(s*w-h*_+f),r*(p-h*w-s*_)]},y}function rc(t){return oc(function(){return t})()}function oc(t){var n,e=150,i=480,r=250,o=0,a=0,u=0,l=0,c=0,s,h=0,f=1,p=1,y=null,w=Oi,_=null,v,S,M,E=Fe,N=.5,T,I,P,R,F;function b(g){return P(g[0]*B,g[1]*B)}function U(g){return g=P.invert(g[0],g[1]),g&&[g[0]*W,g[1]*W]}b.stream=function(g){return R&&F===g?R:R=nc(ec(s)(w(T(E(F=g)))))},b.preclip=function(g){return arguments.length?(w=g,y=void 0,d()):w},b.postclip=function(g){return arguments.length?(E=g,_=v=S=M=null,d()):E},b.clipAngle=function(g){return arguments.length?(w=+g?ku(y=g*B):(y=null,Oi),d()):y*W},b.clipExtent=function(g){return arguments.length?(E=g==null?(_=v=S=M=null,Fe):Lu(_=+g[0][0],v=+g[0][1],S=+g[1][0],M=+g[1][1]),d()):_==null?null:[[_,v],[S,M]]},b.scale=function(g){return arguments.length?(e=+g,q()):e},b.translate=function(g){return arguments.length?(i=+g[0],r=+g[1],q()):[i,r]},b.center=function(g){return arguments.length?(o=g[0]%360*B,a=g[1]%360*B,q()):[o*W,a*W]},b.rotate=function(g){return arguments.length?(u=g[0]%360*B,l=g[1]%360*B,c=g.length>2?g[2]%360*B:0,q()):[u*W,l*W,c*W]},b.angle=function(g){return arguments.length?(h=g%360*B,q()):h*W},b.reflectX=function(g){return arguments.length?(f=g?-1:1,q()):f<0},b.reflectY=function(g){return arguments.length?(p=g?-1:1,q()):p<0},b.precision=function(g){return arguments.length?(T=Vi(I,N=g*g),d()):$t(N)},b.fitExtent=function(g,m){return qr(b,g,m)},b.fitSize=function(g,m){return Zu(b,g,m)},b.fitWidth=function(g,m){return Ku(b,g,m)},b.fitHeight=function(g,m){return Qu(b,g,m)};function q(){var g=Gi(e,0,0,f,p,h).apply(null,n(o,a)),m=Gi(e,i-g[0],r-g[1],f,p,h);return s=Tr(u,l,c),I=Oe(n,m),P=Oe(s,I),T=Vi(I,N),d()}function d(){return R=F=null,b}return function(){return n=t.apply(this,arguments),b.invert=n.invert&&U,q()}}function si(t,n){return[t,yu(wu((nt+n)/2))]}si.invert=function(t,n){return[t,2*Sr(mu(n))-nt]};function ac(){return sc(si).scale(961/rt)}function sc(t){var n=rc(t),e=n.center,i=n.scale,r=n.translate,o=n.clipExtent,a=null,u,l,c;n.scale=function(h){return arguments.length?(i(h),s()):i()},n.translate=function(h){return arguments.length?(r(h),s()):r()},n.center=function(h){return arguments.length?(e(h),s()):e()},n.clipExtent=function(h){return arguments.length?(h==null?a=u=l=c=null:(a=+h[0][0],u=+h[0][1],l=+h[1][0],c=+h[1][1]),s()):a==null?null:[[a,u],[l,c]]};function s(){var h=z*i(),f=n(Nu(n.rotate()).invert([0,0]));return o(a==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:t===si?[[Math.max(f[0]-h,a),u],[Math.min(f[0]+h,l),c]]:[[a,Math.max(f[1]-h,u)],[l,Math.min(f[1]+h,c)]])}return s()}const Mn=t=>()=>t;function uc(t,{sourceEvent:n,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function xt(t,n,e){this.k=t,this.x=n,this.y=e}xt.prototype={constructor:xt,scale:function(t){return t===1?this:new xt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new xt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ln=new xt(1,0,0);xt.prototype;function me(t){t.stopImmediatePropagation()}function Vt(t){t.preventDefault(),t.stopImmediatePropagation()}function cc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function lc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ui(){return this.__zoom||ln}function fc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function hc(){return navigator.maxTouchPoints||"ontouchstart"in this}function pc(t,n,e){var i=t.invertX(n[0][0])-e[0][0],r=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function dc(){var t=cc,n=lc,e=pc,i=fc,r=hc,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],u=250,l=rs,c=Qe("start","zoom","end"),s,h,f,p=500,y=150,w=0,_=10;function v(d){d.property("__zoom",Ui).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",F).filter(r).on("touchstart.zoom",b).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(d,g,m,x){var $=d.selection?d.selection():d;$.property("__zoom",Ui),d!==$?N(d,g,m,x):$.interrupt().each(function(){T(this,arguments).event(x).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},v.scaleBy=function(d,g,m,x){v.scaleTo(d,function(){var $=this.__zoom.k,C=typeof g=="function"?g.apply(this,arguments):g;return $*C},m,x)},v.scaleTo=function(d,g,m,x){v.transform(d,function(){var $=n.apply(this,arguments),C=this.__zoom,A=m==null?E($):typeof m=="function"?m.apply(this,arguments):m,k=C.invert(A),D=typeof g=="function"?g.apply(this,arguments):g;return e(M(S(C,D),A,k),$,a)},m,x)},v.translateBy=function(d,g,m,x){v.transform(d,function(){return e(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof m=="function"?m.apply(this,arguments):m),n.apply(this,arguments),a)},null,x)},v.translateTo=function(d,g,m,x,$){v.transform(d,function(){var C=n.apply(this,arguments),A=this.__zoom,k=x==null?E(C):typeof x=="function"?x.apply(this,arguments):x;return e(ln.translate(k[0],k[1]).scale(A.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof m=="function"?-m.apply(this,arguments):-m),C,a)},x,$)};function S(d,g){return g=Math.max(o[0],Math.min(o[1],g)),g===d.k?d:new xt(g,d.x,d.y)}function M(d,g,m){var x=g[0]-m[0]*d.k,$=g[1]-m[1]*d.k;return x===d.x&&$===d.y?d:new xt(d.k,x,$)}function E(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function N(d,g,m,x){d.on("start.zoom",function(){T(this,arguments).event(x).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(x).end()}).tween("zoom",function(){var $=this,C=arguments,A=T($,C).event(x),k=n.apply($,C),D=m==null?E(k):typeof m=="function"?m.apply($,C):m,V=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),H=$.__zoom,G=typeof g=="function"?g.apply($,C):g,mt=l(H.invert(D).concat(V/H.k),G.invert(D).concat(V/G.k));return function(at){if(at===1)at=G;else{var yt=mt(at),ce=V/yt[2];at=new xt(ce,D[0]-yt[0]*ce,D[1]-yt[1]*ce)}A.zoom(null,at)}})}function T(d,g,m){return!m&&d.__zooming||new I(d,g)}function I(d,g){this.that=d,this.args=g,this.active=0,this.sourceEvent=null,this.extent=n.apply(d,g),this.taps=0}I.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,g){return this.mouse&&d!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var g=j(this.that).datum();c.call(d,this.that,new uc(d,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:c}),g)}};function P(d,...g){if(!t.apply(this,arguments))return;var m=T(this,g).event(d),x=this.__zoom,$=Math.max(o[0],Math.min(o[1],x.k*Math.pow(2,i.apply(this,arguments)))),C=Nt(d);if(m.wheel)(m.mouse[0][0]!==C[0]||m.mouse[0][1]!==C[1])&&(m.mouse[1]=x.invert(m.mouse[0]=C)),clearTimeout(m.wheel);else{if(x.k===$)return;m.mouse=[C,x.invert(C)],An(this),m.start()}Vt(d),m.wheel=setTimeout(A,y),m.zoom("mouse",e(M(S(x,$),m.mouse[0],m.mouse[1]),m.extent,a));function A(){m.wheel=null,m.end()}}function R(d,...g){if(f||!t.apply(this,arguments))return;var m=d.currentTarget,x=T(this,g,!0).event(d),$=j(d.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",V,!0),C=Nt(d,m),A=d.clientX,k=d.clientY;Ia(d.view),me(d),x.mouse=[C,this.__zoom.invert(C)],An(this),x.start();function D(H){if(Vt(H),!x.moved){var G=H.clientX-A,mt=H.clientY-k;x.moved=G*G+mt*mt>w}x.event(H).zoom("mouse",e(M(x.that.__zoom,x.mouse[0]=Nt(H,m),x.mouse[1]),x.extent,a))}function V(H){$.on("mousemove.zoom mouseup.zoom",null),Pa(H.view,x.moved),Vt(H),x.event(H).end()}}function F(d,...g){if(t.apply(this,arguments)){var m=this.__zoom,x=Nt(d.changedTouches?d.changedTouches[0]:d,this),$=m.invert(x),C=m.k*(d.shiftKey?.5:2),A=e(M(S(m,C),x,$),n.apply(this,g),a);Vt(d),u>0?j(this).transition().duration(u).call(N,A,x,d):j(this).call(v.transform,A,x,d)}}function b(d,...g){if(t.apply(this,arguments)){var m=d.touches,x=m.length,$=T(this,g,d.changedTouches.length===x).event(d),C,A,k,D;for(me(d),A=0;A<x;++A)k=m[A],D=Nt(k,this),D=[D,this.__zoom.invert(D),k.identifier],$.touch0?!$.touch1&&$.touch0[2]!==D[2]&&($.touch1=D,$.taps=0):($.touch0=D,C=!0,$.taps=1+!!s);s&&(s=clearTimeout(s)),C&&($.taps<2&&(h=D[0],s=setTimeout(function(){s=null},p)),An(this),$.start())}}function U(d,...g){if(this.__zooming){var m=T(this,g).event(d),x=d.changedTouches,$=x.length,C,A,k,D;for(Vt(d),C=0;C<$;++C)A=x[C],k=Nt(A,this),m.touch0&&m.touch0[2]===A.identifier?m.touch0[0]=k:m.touch1&&m.touch1[2]===A.identifier&&(m.touch1[0]=k);if(A=m.that.__zoom,m.touch1){var V=m.touch0[0],H=m.touch0[1],G=m.touch1[0],mt=m.touch1[1],at=(at=G[0]-V[0])*at+(at=G[1]-V[1])*at,yt=(yt=mt[0]-H[0])*yt+(yt=mt[1]-H[1])*yt;A=S(A,Math.sqrt(at/yt)),k=[(V[0]+G[0])/2,(V[1]+G[1])/2],D=[(H[0]+mt[0])/2,(H[1]+mt[1])/2]}else if(m.touch0)k=m.touch0[0],D=m.touch0[1];else return;m.zoom("touch",e(M(A,k,D),m.extent,a))}}function q(d,...g){if(this.__zooming){var m=T(this,g).event(d),x=d.changedTouches,$=x.length,C,A;for(me(d),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),C=0;C<$;++C)A=x[C],m.touch0&&m.touch0[2]===A.identifier?delete m.touch0:m.touch1&&m.touch1[2]===A.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(A=Nt(A,this),Math.hypot(h[0]-A[0],h[1]-A[1])<_)){var k=j(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return v.wheelDelta=function(d){return arguments.length?(i=typeof d=="function"?d:Mn(+d),v):i},v.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Mn(!!d),v):t},v.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:Mn(!!d),v):r},v.extent=function(d){return arguments.length?(n=typeof d=="function"?d:Mn([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),v):n},v.scaleExtent=function(d){return arguments.length?(o[0]=+d[0],o[1]=+d[1],v):[o[0],o[1]]},v.translateExtent=function(d){return arguments.length?(a[0][0]=+d[0][0],a[1][0]=+d[1][0],a[0][1]=+d[0][1],a[1][1]=+d[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(d){return arguments.length?(e=d,v):e},v.duration=function(d){return arguments.length?(u=+d,v):u},v.interpolate=function(d){return arguments.length?(l=d,v):l},v.on=function(){var d=c.on.apply(c,arguments);return d===c?v:d},v.clickDistance=function(d){return arguments.length?(w=(d=+d)*d,v):Math.sqrt(w)},v.tapDistance=function(d){return arguments.length?(_=+d,v):_},v}function gc(t){return t}function mc(t){if(t==null)return gc;var n,e,i=t.scale[0],r=t.scale[1],o=t.translate[0],a=t.translate[1];return function(u,l){l||(n=e=0);var c=2,s=u.length,h=new Array(s);for(h[0]=(n+=u[0])*i+o,h[1]=(e+=u[1])*r+a;c<s;)h[c]=u[c],++c;return h}}function yc(t,n){for(var e,i=t.length,r=i-n;r<--i;)e=t[r],t[r++]=t[i],t[i]=e}function vc(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(e){return Wi(t,e)})}:Wi(t,n)}function Wi(t,n){var e=n.id,i=n.bbox,r=n.properties==null?{}:n.properties,o=wc(t,n);return e==null&&i==null?{type:"Feature",properties:r,geometry:o}:i==null?{type:"Feature",id:e,properties:r,geometry:o}:{type:"Feature",id:e,bbox:i,properties:r,geometry:o}}function wc(t,n){var e=mc(t.transform),i=t.arcs;function r(s,h){h.length&&h.pop();for(var f=i[s<0?~s:s],p=0,y=f.length;p<y;++p)h.push(e(f[p],p));s<0&&yc(h,y)}function o(s){return e(s)}function a(s){for(var h=[],f=0,p=s.length;f<p;++f)r(s[f],h);return h.length<2&&h.push(h[0]),h}function u(s){for(var h=a(s);h.length<4;)h.push(h[0]);return h}function l(s){return s.map(u)}function c(s){var h=s.type,f;switch(h){case"GeometryCollection":return{type:h,geometries:s.geometries.map(c)};case"Point":f=o(s.coordinates);break;case"MultiPoint":f=s.coordinates.map(o);break;case"LineString":f=a(s.arcs);break;case"MultiLineString":f=s.arcs.map(a);break;case"Polygon":f=l(s.arcs);break;case"MultiPolygon":f=s.arcs.map(l);break;default:return null}return{type:h,coordinates:f}}return c(n)}const ye={topo:["https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json","https://unpkg.com/world-atlas@2/countries-110m.json"],countries:["https://cdn.jsdelivr.net/npm/world-countries@5.1.0/countries.json","https://unpkg.com/world-countries@5.1.0/countries.json"],cities:["./cities.json"]},_c={"north-america":{label:"North America",color:"#e6c288"},"south-america":{label:"South America",color:"#a8c686"},europe:{label:"Europe",color:"#d8a499"},africa:{label:"Africa",color:"#e8d8a5"},asia:{label:"Asia",color:"#c4a484"},oceania:{label:"Oceania",color:"#99badd"}},Wc={ocean:"#004866",stroke:"#000000",default:"#d0d0d0",continents:Object.fromEntries(Object.entries(_c).map(([t,n])=>[t,n.color]))};function wt(t){const n=String(t);return n.length>=3?n:n.padStart(3,"0")}async function ve(t,n){let e=null;for(const i of t)try{const r=await fetch(i,{mode:"cors"});if(!r.ok)throw new Error(`${n} fetch failed (${r.status})`);return await r.json()}catch(r){e=r}throw new Error(`${n} failed on all sources. ${e?e.message:""}`)}function xc(t){const n=(t.region||"").toLowerCase(),e=(t.subregion||"").toLowerCase();return n==="americas"?e.includes("south")?"south-america":"north-america":n==="europe"?"europe":n==="africa"?"africa":n==="asia"?"asia":n==="oceania"?"oceania":null}function Ec(t,n,e){return Math.max(t,Math.min(n,e))}function Zc(t){return t?t.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):""}let Ft,ct,fn,Mt,Ze,tn,ne,ee=1,Pn="",ue="MAP_SELECTION",zt=0,At=!0,we=new Set,ie="",J={},$n=[],Lt={},hn,re,nn;const Nn={top:90,right:40,bottom:40,left:40},Sc=12,Mc=.35,$c=4,Nc=14;async function Tc(t){const n=t||"world";j("#map-stage").selectAll("*").remove(),tn=window.innerWidth,ne=window.innerHeight,Ft=j("#map-stage").append("svg").attr("viewBox",`0 0 ${tn} ${ne}`).attr("preserveAspectRatio","xMidYMid meet"),ct=Ft.append("g"),fn=dc().scaleExtent([1,50]).on("zoom",r=>{ct.attr("transform",r.transform),ee=r.transform.k,Pc(),nn&&nn.attr("stroke-width",.5/ee)}),Ft.call(fn);const i=document.getElementById("mode-toggle");i&&(i.onclick=Oc);try{const r=await ve(ye.topo,"World Atlas"),o=await ve(ye.countries,"World Countries");Lt=await ve(ye.cities,"Cities");const a=new Map;for(const f of o)f.ccn3&&a.set(wt(f.ccn3),f);if(a.has("383")||a.set("383",{name:{common:"Kosovo"},region:"Europe",subregion:"Southeast Europe",ccn3:"383"}),(!Lt[383]||!Lt[383].cities||Lt[383].cities.length<3)&&(Lt[383]={cities:[{name:"Pristina",latlng:[42.6629,21.1655],fact:"Pristina is the capital and largest city."},{name:"Prizren",latlng:[42.2141,20.7365],fact:"Prizren is a historic city known for its fortress."},{name:"Peja",latlng:[42.6594,20.2887],fact:"Peja is located near the Rugova Canyon."},{name:"Gjakova",latlng:[42.3804,20.4309],fact:"Gjakova has a well-preserved Old Bazaar."}]}),$n=vc(r,r.objects.countries).features,$n.forEach(f=>{if(f.id==-99){const p=Wn(f);p[1]>5&&p[1]<15&&p[0]>40&&p[0]<55?f.id="706":p[1]>40&&p[1]<45&&p[0]>19&&p[0]<23&&(f.id="383")}}),J=Cc($n,a,n,Lt),Object.keys(J).length===0)throw new Error("No countries matched for this continent with valid city data.");const l=$n.filter(f=>J[wt(f.id)]);Hc(l,n);let c=l;n==="europe"&&(c=l.map(f=>{if(wt(f.id)==="643"){const y=JSON.parse(JSON.stringify(f));return y.geometry&&y.geometry.type==="MultiPolygon"&&(y.geometry.coordinates=y.geometry.coordinates.filter(w=>!w[0].some(v=>v[0]<-40))),y}return f}));const s=Yr();if(Mt=ac().fitExtent([[s.x0,s.y0],[s.x1,s.y1]],{type:"FeatureCollection",features:c}),n==="europe"){const f=Mt.translate();Mt.translate([f[0]-tn*.06,f[1]])}if(n==="oceania"){const f=J[242];f&&f.cities.forEach(y=>y.latlng[1]-=15);const p=J[548];if(p){const y=l.find(w=>wt(w.id)==="548");if(y){const w=Wn(y),_=p.cities.find(v=>v.name===p.capital);_&&(_.latlng=[w[1],w[0]])}}}const h=Object.values(J).map(f=>{const p=f.capital;return{...f.cities.find(w=>w.name===p)||f.cities[0],countryId:f.id,id:f.id}});Ze=Wu().projection(Mt),nn=ct.selectAll(".state").data(l).enter().append("path").attr("d",Ze).attr("class","state").attr("id",f=>`state-${wt(f.id)}`).attr("data-continent",f=>{var p;return((p=J[wt(f.id)])==null?void 0:p.continent)||""}).on("click",Rc),hn=ct.selectAll(".city-node").data(h).enter().append("circle").attr("class","city-node").attr("r",2).attr("cx",f=>Mt([f.latlng[1],f.latlng[0]])[0]).attr("cy",f=>Mt([f.latlng[1],f.latlng[0]])[1]).attr("id",f=>"city-"+f.id).on("click",(f,p)=>Gr(f,p,p.id)),ui()}catch(r){console.error(r);const o=document.getElementById("main-prompt"),a=document.getElementById("sub-prompt");o&&(o.innerText="Error Loading Map"),a&&(a.innerText=r.message)}}function Yr(){let t=Nn.top;const n=document.getElementById("top-hud");if(n){const e=n.getBoundingClientRect();t=Math.max(t,e.bottom+12)}return{x0:Nn.left,y0:t,x1:tn-Nn.right,y1:ne-Nn.bottom}}function Cc(t,n,e,i){var o,a;const r={};for(const u of t){const l=wt(u.id),c=n.get(l);if(!c)continue;const s=xc(c);if(!s||e!=="world"&&s!==e)continue;const h=Array.isArray(c.capital)?c.capital[0]:c.capital;if(!h)continue;const f=bc(l,h,c,u,i);f.length<3||(r[l]={id:l,name:((o=c.name)==null?void 0:o.common)||((a=c.name)==null?void 0:a.official)||c.name,iso:c.cca3||c.cioc||c.cca2||c.ccn3,capital:h,cities:f,facts:Ic(c),continent:s})}return r}function bc(t,n,e,i,r){const o=r[t];if(!o||!Array.isArray(o.cities))return[];const u=o.cities.slice(0,7).map(s=>({name:s.name,latlng:s.latlng,fact:s.fact||`${s.name} is one of the countrys major cities.`})),l=n.toLowerCase();if(!u.some(s=>s.name.toLowerCase()===l)&&u.length>0){const s=Ac(e,i);u.unshift({name:n,latlng:[s[1],s[0]],fact:`${n} is the national capital and political center.`})}return u.slice(0,6)}function Ac(t,n){var e;return Array.isArray((e=t.capitalInfo)==null?void 0:e.latlng)&&t.capitalInfo.latlng.length===2?[t.capitalInfo.latlng[1],t.capitalInfo.latlng[0]]:Array.isArray(t.latlng)&&t.latlng.length===2?[t.latlng[1],t.latlng[0]]:Wn(n)}function Ic(t){const n=t.region||"Unknown",e=t.subregion||"Unknown",i=t.area?`${t.area.toLocaleString()} km`:"Unknown",r=t.languages?Object.values(t.languages).slice(0,3).join(", "):"Unknown",o=t.currencies?Object.values(t.currencies).map(a=>a.name).slice(0,2).join(", "):"Unknown";return[`Region: ${n}`,`Subregion: ${e}`,`Area: ${i}`,`Languages: ${r}`,`Currencies: ${o}`]}function Hr(){return{r:Ec($c,Nc,Sc/Math.pow(ee,Mc))/ee*2}}function Pc(){const{r:t}=Hr();hn&&hn.attr("r",t),re&&re.attr("r",t)}function ui(){var l;const n=Object.keys(J).filter(c=>!we.has(c));if(n.length===0){alert("Game Complete! Final Score: "+zt),we.clear(),zt=0,ui();return}Pn=n[Math.floor(Math.random()*n.length)],we.add(Pn),ue="MAP_SELECTION",ct.selectAll(".city-node, .city-halo").remove(),hn=ct.selectAll(".city-node"),re=ct.selectAll(".city-halo"),nn&&nn.classed("active-focused",!1),(l=document.getElementById("fact-overlay"))==null||l.classList.remove("show"),Yc();const e=J[Pn],i=document.getElementById("find-label"),r=document.getElementById("main-prompt"),o=document.getElementById("target-state"),a=document.getElementById("sub-prompt");i&&(i.innerText="Find Country"),r&&(r.innerText=e.name),o&&(o.innerText=e.iso),a&&(a.innerText="");const u=document.getElementById("mode-toggle");u&&u.classList.remove("disabled"),pn()}function Rc(t,n){if(ue!=="MAP_SELECTION")return;const e=wt(n.id);if(J[e])if(e===Pn)zt+=10,pn(),Ki(this,"correct"),kc(n,e);else{zt-=10,pn(),Ki(this,"wrong");const i=J[e].name;Vr(`That is <span style="font-weight:900;">${i}</span>.`)}}let en;function Vr(t){const n=document.getElementById("sub-prompt");n&&(n.innerHTML=t,n.classList.add("show"),n.offsetWidth,en&&clearTimeout(en),en=setTimeout(()=>{n.classList.remove("show")},3e3))}function kc(t,n){ue="CITY_SELECTION",qc(t),j(`#state-${n}`).classed("active-focused",!0);const e=J[n],i=document.getElementById("find-label");i&&(i.innerText="Find City");const r=document.getElementById("sub-prompt");r&&(r.innerHTML="",r.classList.remove("persist","show"));const o=e.cities.slice(0,3),a=document.getElementById("main-prompt");if(At)ie=e.capital,a&&(a.innerText="Capital");else{const l=o[Math.floor(Math.random()*o.length)];ie=l.name,a&&(a.innerText="Identify City"),r&&(r.innerText=`"${l.fact}"`,r.classList.add("persist")),en&&clearTimeout(en)}const u=document.getElementById("mode-toggle");u&&u.classList.add("disabled"),zc(n,o)}function zc(t,n){const e=n.map(r=>{const o=Mt([r.latlng[1],r.latlng[0]]);return o?{name:r.name,x:o[0],y:o[1]}:null}).filter(r=>r!==null);ct.selectAll(".city-node, .city-halo").remove();const{r:i}=Hr();re=ct.selectAll(".city-halo").data(e).enter().append("circle").attr("class","city-halo").attr("cx",r=>r.x).attr("cy",r=>r.y).attr("r",i).style("pointer-events","none"),hn=ct.selectAll(".city-node").data(e).enter().append("circle").attr("class","city-node").attr("cx",r=>r.x).attr("cy",r=>r.y).attr("r",i).on("mouseover",Bc).on("mousemove",Fc).on("mouseout",Dc).on("click",(r,o)=>Gr(r,o,t)).style("pointer-events","auto")}function Gr(t,n,e){var l,c;const i=n.name===ie,r=j(t.currentTarget);if(r.classed("wrong-choice")||r.classed("correct-choice"))return;const o=J[e],a=((l=o.cities.find(s=>s.name===n.name))==null?void 0:l.fact)||"Major city.",u=((c=o.cities.find(s=>s.name===ie))==null?void 0:c.fact)||"Major city.";if(i){r.classed("correct-choice",!0),zt+=20,pn();const s=document.getElementById("sub-prompt");s&&(s.innerText="",s.classList.remove("persist","show"));const h=At?`Capital of ${o.name}`:a;Zi(n.name,e,"CORRECT","status-correct",h)}else if(r.classed("wrong-choice",!0),ct.selectAll(".city-halo").filter(s=>s.name===n.name).remove(),zt-=10,pn(),At)Vr(`That is <span style="font-weight:900;">${n.name}</span>.`);else{const s=document.getElementById("sub-prompt");s&&(s.innerText=`"${u}"`),Zi(n.name,e,"INCORRECT","status-wrong",a,"Try Again",Lc)}}function Zi(t,n,e,i,r,o="Next Country",a=null){const u=J[n],l=document.getElementById("fact-overlay"),c=document.getElementById("next-action-btn"),s=document.getElementById("fact-status"),h=document.getElementById("fact-city-name"),f=document.getElementById("fact-text");s&&(s.innerText=e,s.className=`fact-status ${i}`),h&&(h.innerText=t),f&&(f.innerText=r||(At?`Capital of ${u.name}`:"Major city.")),c&&(c.innerText=o,c.onclick=a||Xc),l&&l.classList.add("show")}function Lc(){const t=document.getElementById("fact-overlay");t&&t.classList.remove("show")}function Oc(){var n;if(ue==="CITY_SELECTION")return;At=!At,(n=document.getElementById("mode-toggle"))==null||n.classList.toggle("active");const t=document.getElementById("mode-label");t&&(t.innerText=At?"Capital":"Fact")}function pn(){const t=document.getElementById("score-val");t&&(t.innerText=String(zt))}function Bc(t,n){const e=document.getElementById("city-tooltip");e&&(e.innerText=n.name,e.style.opacity="1",e.style.left=t.pageX+10+"px",e.style.top=t.pageY-20+"px")}function Fc(t){const n=document.getElementById("city-tooltip");n&&(n.style.left=t.pageX+10+"px",n.style.top=t.pageY-20+"px")}function Dc(){const t=document.getElementById("city-tooltip");t&&(t.style.opacity="0")}function Xc(){ui()}function qc(t){const n=Yr(),e=n.x1-n.x0,i=n.y1-n.y0,r=Ze.bounds(t),o=r[1][0]-r[0][0],a=r[1][1]-r[0][1],u=Number.isFinite(o)&&Number.isFinite(a)&&o>0&&a>0&&o<tn*3&&a<ne*3,l=(n.x0+n.x1)/2,c=(n.y0+n.y1)/2;if(u){const p=(r[0][0]+r[1][0])/2,y=(r[0][1]+r[1][1])/2,w=Math.max(1,Math.min(10,.78/Math.max(o/e,a/i))),_=[l-w*p,c-w*y];Ft.transition().duration(900).call(fn.transform,ln.translate(_[0],_[1]).scale(w));return}const s=Mt(Wn(t));if(!s)return;const h=4,f=[l-h*s[0],c-h*s[1]];Ft.transition().duration(900).call(fn.transform,ln.translate(f[0],f[1]).scale(h))}function Yc(){Ft.transition().duration(1e3).call(fn.transform,ln)}function Ki(t,n){j(t).classed(n+"-flash",!0),setTimeout(()=>j(t).classed(n+"-flash",!1),500)}function Hc(t,n){var r;const e=n==="europe",i=n==="oceania";if(!(!e&&!i))for(const o of t){const a=wt(o.id);e&&a==="250"&&((r=o.geometry)==null?void 0:r.type)==="MultiPolygon"&&(o.geometry.coordinates=o.geometry.coordinates.filter(u=>u[0][0][0]>-20)),i&&a==="242"&&o.geometry&&Vc(o.geometry,u=>u[0]-=15)}}function Vc(t,n){t.type==="MultiPolygon"?Ke(t.coordinates,3,n):t.type==="Polygon"&&Ke(t.coordinates,2,n)}function Ke(t,n,e){if(n===0){e(t);return}for(let i=0;i<t.length;i++)Ke(t[i],n-1,e)}function Kc(){j("#map-stage").selectAll("*").remove();const t=document.getElementById("view-quiz"),n=document.getElementById("view-landing");t&&t.classList.add("hidden"),n&&n.classList.remove("hidden")}if(!document.getElementById("view-landing")){const t=new URLSearchParams(window.location.search);Tc(t.get("continent"))}export{xc as A,Zc as B,vr as C,Wc as G,it as S,no as a,xe as b,Ia as c,Qe as d,Uc as e,Ee as f,Pt as g,Rt as h,O as i,$t as j,L as k,rc as l,X as m,Gc as n,Kc as o,Nt as p,Tc as q,cr as r,j as s,Wu as t,ve as u,ye as v,wt as w,vc as x,Pa as y,Wn as z};
